{"version":3,"sources":["webpack:///src/views/activity/activityStoreStepThree.vue","webpack:///./src/views/activity/activityStoreStepThree.vue?ffa6","webpack:///./src/views/activity/activityStoreStepThree.vue"],"names":["activityStoreStepThree","data","title_list","name","url","step","active","next","storeForm","status","rules","ACbrand","required","message","trigger","radio","product_data","page_data","total_page","current_page","total_num","page_size","check_data","components","pageTitle","title","Pagination","page","mounted","item","this","$store","state","activity","COname","COabo","COstart","COend","COfilter","COdiscount","COamount","COtype","getData","$message","type","duration","$router","push","methods","v","code","_this","that","params","token","localStorage","getItem","PBstatus","page_num","product_filter","axios_default","a","get","api","get_all_product","then","res","products","_loop","i","PRids","indexOf","PRid","$nextTick","$refs","table","toggleRowSelection","length","count","Math","ceil","error","freshClick","console","log","onSubmit","changeFun","e","_arr","concat","newarr","arr","JSON","parse","stringify_default","_i","storeSubmit","_this2","$route","query","COid","_form","COother","COotherType","COotherContent","Number","COnumber","post","create","COstatus","COunit","COimage","COproduct","COgenre","lastStep","pageChange","created","activity_activityStoreStepThree","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","list","on","_v","ref","model","label-width","disabled","_s","width","label","prop","value","callback","$$v","$set","expression","inline","placeholder","click","_e","staticStyle","margin-top","stripe","selection-change","align","scopedSlots","_u","key","fn","scope","height","src","row","PRimage","PRname","total","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/25.d19bdf051f35141a46de.js","sourcesContent":["<template>\n  <div class=\"m-step\">\n    <page-title :list=\"title_list\" @freshClick=\"freshClick\"></page-title>\n    <el-form  :model=\" $store.state.activity\" ref=\"storeForm\" :rules=\"rules\" label-width=\"1.2rem\" class=\"demo-ruleForm\" :disabled=\"$store.state.activity.disabled\">\n      <div class=\"m-step-content\">\n        <h3 class=\"m-step-title\">创建新活动</h3>\n        <div class=\"m-step-part\">\n          <step :list=\"step\"></step>\n        </div>\n        <div class=\"m-step-part\">\n          <h3 class=\"m-step-h3 m-flex-between\">\n            <span>活动名称：{{$store.state.activity.COname}}</span>\n          </h3>\n          <div>\n            <table class=\"m-activity-table\" width=\"100%\">\n              <tr>\n                <td width=\"250\">活动描述：<span>{{$store.state.activity.COabo}}</span></td>\n                <td>活动时间：<span>{{$store.state.activity.COstart}} 至 {{$store.state.activity.COend}}</span></td>\n                <td width=\"320\">活动预热：<span>预热</span></td>\n              </tr>\n              <tr>\n                <td>活动类型：<span>{{$store.state.activity.COtype}}</span></td>\n                <!--<td>创建时间：<span>2018-06-29  00 : 00：01 </span></td>-->\n              </tr>\n            </table>\n          </div>\n        </div>\n        <el-form-item label=\"优惠类型：\" prop=\"ACbrand\">\n          <p>\n            <el-radio v-model=\"$store.state.activity.COproduct\" label=\"自选商品\">自选商品</el-radio>\n          </p>\n          <p>\n            <el-radio v-model=\"$store.state.activity.COproduct\" label=\"全店商品\">全店商品</el-radio>\n          </p>\n        </el-form-item>\n        <el-form :inline=\"true\" :model=\"storeForm\" class=\"demo-form-inline\" v-if=\" $store.state.activity.COproduct == '自选商品'\">\n          <div class=\"m-select-box\">\n            <div class=\"m-left\">\n              <el-form-item label=\"商品名称\">\n                <el-input v-model=\"storeForm.name\" class=\"m-input-s\" placeholder=\"\"></el-input>\n              </el-form-item>\n              <el-form-item label=\"商品状态\">\n                <el-select v-model=\"storeForm.status\" class=\"m-input-s\" placeholder=\"\">\n                  <el-option label=\"全部\" value=\"\"></el-option>\n                  <el-option label=\"上架状态\" value=\"上架状态\"></el-option>\n                  <el-option label=\"下架状态\" value=\"下架状态\"></el-option>\n                  <el-option label=\"预售中\" value=\"预售中\"></el-option>\n                </el-select>\n              </el-form-item>\n            </div>\n            <div class=\"m-right\">\n              <el-form-item>\n                <el-button type=\"primary\" class=\"m-select-btn\" @click=\"onSubmit\">搜索</el-button>\n              </el-form-item>\n            </div>\n          </div>\n        </el-form>\n        <div class=\"m-middle\" style=\"width: 100%;margin-top: 0.1rem;\" v-if=\" $store.state.activity.COproduct == '自选商品'\">\n          <el-table :data=\"product_data\" stripe style=\"width: 100%\" ref=\"table\" @selection-change=\"changeFun\">\n            <el-table-column type=\"selection\" width=\"55\"></el-table-column>\n            <el-table-column align=\"center\" prop=\"userId\" width=\"400\" label=\"宝贝描述\">\n              <template slot-scope=\"scope\">\n                <div class=\"m-production-description\">\n                  <img class=\"m-img\" :src=\"scope.row.PRimage[0]\" style=\"width: 0.6rem;height:0.6rem;\" />\n                  <div>\n                    <p>{{scope.row.PRname}}</p>\n                    <p>{{scope.row.PRid}}</p>\n                  </div>\n                </div>\n              </template>\n            </el-table-column>\n            <el-table-column align=\"center\" prop=\"userId\" label=\"价格\" ></el-table-column>\n            <el-table-column align=\"center\" prop=\"PRstatus\" label=\"状态\" ></el-table-column>\n            <el-table-column align=\"center\" prop=\"PRstock\" label=\"库存\" ></el-table-column>\n            <!--<el-table-column align=\"center\" label=\"操作\" >-->\n              <!--<template slot-scope=\"scope\">-->\n                <!--<span class=\"m-link m-first\">参加活动</span>-->\n              <!--</template>-->\n            <!--</el-table-column>-->\n          </el-table>\n        </div>\n        <div class=\"m-page-box\" v-if=\" $store.state.activity.COproduct == '自选商品'\">\n          <pagination :total=\"page_data.total_page\" @pageChange=\"pageChange\"></pagination>\n        </div>\n        <div class=\"m-bottom-btn m-flex-center\">\n            <span class=\"m-btn\" @click=\"lastStep\">上一步</span>\n            <span class=\"m-btn  active\" @click=\"storeSubmit\">完成</span>\n        </div>\n      </div>\n    </el-form>\n  </div>\n</template>\n\n<script type=\"text/ecmascript-6\">\n  import pageTitle from '../../components/common/title';\n  import step from '../../components/common/step';\n  import Pagination from \"../../components/common/page\";\n  import api from '../../api/api';\n  import axios from 'axios';\n  export default {\n    data() {\n      return {\n        title_list:[\n          {\n            name:'店铺活动',\n            url:'/activity/storeActivity'\n          },\n          {\n            name:'创建/编辑活动',\n            url:'/activity/activityStoreStepThree'\n          }\n        ],\n        step:[\n          {\n            name:'基本信息',\n            active:true,\n            next:true\n          },\n          {\n            name:'优惠门槛及内容',\n            active:true,\n            next:true\n          },\n          {\n            name:'设置商品优惠',\n            active:true,\n            next:false\n          }\n        ],\n        storeForm:{\n          name:'',\n          status:''\n        },\n        rules:{\n          ACbrand:[\n            { required: true, message: '请选择优惠类型', trigger: 'blur' }\n          ],\n        },\n        radio:'1',\n        product_data:[],\n        page_data:{\n          total_page:0,\n          current_page:1,\n          total_num:0,\n          page_size:10,\n        },\n        check_data:[]\n      }\n    },\n    components:{\n      pageTitle,\n      step,\n      Pagination\n    },\n    mounted(){\n      let item = this.$store.state.activity;\n      if(!item.COname || !item.COabo || !item.COstart || !item.COend){\n        this.$message({\n          type:'warning',\n          message:'请先填写第一步内容',\n          duration:1000\n        });\n        this.$router.push('/activity/activityStoreStepOne');\n        return false;\n      }\n      if(!item.COfilter || !(item.COdiscount || item.COamount || item.COtype == '其它')){\n        this.$message({\n          type:'warning',\n          message:'请先填写第二步内容',\n          duration:1000\n        });\n        this.$router.push('/activity/activityStoreStepTwo');\n        return false;\n      }\n      this.getData();\n    },\n    methods: {\n      /*获取表格数据*/\n      getData(v,code){\n        let that = this;\n        let params = {\n          token:localStorage.getItem('token'),\n          PBstatus:this.storeForm.status,\n          page_num: v || this.page_data.current_page,\n          page_size:this.page_data.page_size,\n          product_filter:code || ''\n        };\n        axios.get(api.get_all_product,{params:params}).then(res => {\n          if(res.data.status == 200) {\n            this.product_data = res.data.data.products;\n            for(let i=0;i<this.product_data.length;i++){\n              if(this.$store.state.activity.PRids.indexOf(this.product_data[i].PRid)!= -1){\n                that.$nextTick(function(){//注意这个，延时执行。\n                  that.$refs.table.toggleRowSelection(that.product_data[i],true);//每次更新了数据，触发这个函数即可。\n                });\n              }\n            }\n            this.page_data.total_num = res.data.data.count;\n            this.page_data.total_page = Math.ceil(this.page_data.total_num / this.page_data.page_size);\n          }else{\n            this.$message.error(res.data.message);\n          }\n        },error => {\n          this.$message.error(error.data.message);\n        })\n      },\n      freshClick(){\n        console.log('fresh');\n      },\n      /*搜索商品*/\n      onSubmit(){\n        this.getData(1,this.storeForm.name);\n      },\n      /*表格多选事件*/\n      changeFun(e){\n        let _arr = [];\n       for(let i=0;i<e.length;i++){\n         _arr.push(e[i].PRid);\n       }\n        this.check_data[this.page_data.current_page-1] = [].concat(_arr);\n        let newarr=[];\n        let arr = JSON.parse(JSON.stringify(this.check_data));\n        for(let i=0;i<arr.length;i++)\n        {\n          newarr=newarr.concat(arr[i]);\n        }\n        this.$store.state.activity.PRids = [].concat(newarr);\n      },\n      /*完成*/\n      storeSubmit(){\n        if(this.$route.query.COid){\n          this.$message({\n            type: 'warning',\n            message: '已创建过的活动不可修改'\n          });\n          return false;\n        }\n        // console.log(this.$store.state.activity)\n        let _form = JSON.parse(JSON.stringify(this.$store.state.activity));\n        // for(let i =0;i<this.$store.state.activity.COimage.length;i++){\n        //   _form.COimage = this.$store.state.activity.COimage[0].url\n        // }\n        if(_form.COtype == '其它'){\n          _form.COother = (_form.COotherType == 0 && _form.COotherContent[0] == '') ? '包邮':_form.COotherContent[_form.COotherType]\n        }\n        _form.COamount = Number(_form.COamount);\n        _form.COnumber = Number(_form.COnumber);\n        _form.COfilter  = Number(_form.COfilter );\n        _form.COdiscount = Number(_form.COdiscount);\n\n        axios.post(api.create+'?token='+localStorage.getItem('token'),_form).then(res => {\n          if(res.data.status == 200){\n            this.$message({\n              type: 'success',\n              message: '处理成功 '\n            });\n            this.$store.state.activity = {\n              COabo:'',\n              COname:'',\n              COstatus:'',\n              COstart:'',\n              COend:'',\n              COfilter:null,\n              COother:'',\n              COdiscount:null,\n              COamount:null,\n              COtype:'满减',\n              COunit:'元',\n              COnumber:null,\n              COimage:[],\n              COotherType:'0',\n              COotherContent:[\n                '','',''\n              ],\n              COproduct:'全店商品',\n              PRids:[],\n              COgenre:'活动'\n            };\n            this.$router.push('/activity/storeActivity');\n          }else{\n            this.$message({\n              type: 'error',\n              message: '服务器请求失败，请稍后再试 '\n            });\n          }\n        },error =>{\n          this.$message({\n            type: 'error',\n            message: '服务器请求失败，请稍后再试 '\n          });\n        })\n      },\n      lastStep(){\n        this.$router.push('/activity/activityStoreStepTwo')\n      },\n      pageChange(v){\n        if(v == this.page_data.current_page){\n          this.$message({\n            message: '这已经是第' + v + '页数据了',\n            type: 'warning'\n          });\n          return false;\n        }\n        this.page_data.current_page = v;\n        this.getData(v);\n      }\n    },\n    created() {\n\n    }\n  }\n</script>\n<style lang=\"less\" rel=\"stylesheet/less\" scoped>\n  @import \"../../common/css/activity\";\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/activity/activityStoreStepThree.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-step\"},[_c('page-title',{attrs:{\"list\":_vm.title_list},on:{\"freshClick\":_vm.freshClick}}),_vm._v(\" \"),_c('el-form',{ref:\"storeForm\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.$store.state.activity,\"rules\":_vm.rules,\"label-width\":\"1.2rem\",\"disabled\":_vm.$store.state.activity.disabled}},[_c('div',{staticClass:\"m-step-content\"},[_c('h3',{staticClass:\"m-step-title\"},[_vm._v(\"创建新活动\")]),_vm._v(\" \"),_c('div',{staticClass:\"m-step-part\"},[_c('step',{attrs:{\"list\":_vm.step}})],1),_vm._v(\" \"),_c('div',{staticClass:\"m-step-part\"},[_c('h3',{staticClass:\"m-step-h3 m-flex-between\"},[_c('span',[_vm._v(\"活动名称：\"+_vm._s(_vm.$store.state.activity.COname))])]),_vm._v(\" \"),_c('div',[_c('table',{staticClass:\"m-activity-table\",attrs:{\"width\":\"100%\"}},[_c('tr',[_c('td',{attrs:{\"width\":\"250\"}},[_vm._v(\"活动描述：\"),_c('span',[_vm._v(_vm._s(_vm.$store.state.activity.COabo))])]),_vm._v(\" \"),_c('td',[_vm._v(\"活动时间：\"),_c('span',[_vm._v(_vm._s(_vm.$store.state.activity.COstart)+\" 至 \"+_vm._s(_vm.$store.state.activity.COend))])]),_vm._v(\" \"),_c('td',{attrs:{\"width\":\"320\"}},[_vm._v(\"活动预热：\"),_c('span',[_vm._v(\"预热\")])])]),_vm._v(\" \"),_c('tr',[_c('td',[_vm._v(\"活动类型：\"),_c('span',[_vm._v(_vm._s(_vm.$store.state.activity.COtype))])])])])])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"优惠类型：\",\"prop\":\"ACbrand\"}},[_c('p',[_c('el-radio',{attrs:{\"label\":\"自选商品\"},model:{value:(_vm.$store.state.activity.COproduct),callback:function ($$v) {_vm.$set(_vm.$store.state.activity, \"COproduct\", $$v)},expression:\"$store.state.activity.COproduct\"}},[_vm._v(\"自选商品\")])],1),_vm._v(\" \"),_c('p',[_c('el-radio',{attrs:{\"label\":\"全店商品\"},model:{value:(_vm.$store.state.activity.COproduct),callback:function ($$v) {_vm.$set(_vm.$store.state.activity, \"COproduct\", $$v)},expression:\"$store.state.activity.COproduct\"}},[_vm._v(\"全店商品\")])],1)]),_vm._v(\" \"),( _vm.$store.state.activity.COproduct == '自选商品')?_c('el-form',{staticClass:\"demo-form-inline\",attrs:{\"inline\":true,\"model\":_vm.storeForm}},[_c('div',{staticClass:\"m-select-box\"},[_c('div',{staticClass:\"m-left\"},[_c('el-form-item',{attrs:{\"label\":\"商品名称\"}},[_c('el-input',{staticClass:\"m-input-s\",attrs:{\"placeholder\":\"\"},model:{value:(_vm.storeForm.name),callback:function ($$v) {_vm.$set(_vm.storeForm, \"name\", $$v)},expression:\"storeForm.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"商品状态\"}},[_c('el-select',{staticClass:\"m-input-s\",attrs:{\"placeholder\":\"\"},model:{value:(_vm.storeForm.status),callback:function ($$v) {_vm.$set(_vm.storeForm, \"status\", $$v)},expression:\"storeForm.status\"}},[_c('el-option',{attrs:{\"label\":\"全部\",\"value\":\"\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"上架状态\",\"value\":\"上架状态\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"下架状态\",\"value\":\"下架状态\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"预售中\",\"value\":\"预售中\"}})],1)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"m-right\"},[_c('el-form-item',[_c('el-button',{staticClass:\"m-select-btn\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"搜索\")])],1)],1)])]):_vm._e(),_vm._v(\" \"),( _vm.$store.state.activity.COproduct == '自选商品')?_c('div',{staticClass:\"m-middle\",staticStyle:{\"width\":\"100%\",\"margin-top\":\"0.1rem\"}},[_c('el-table',{ref:\"table\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.product_data,\"stripe\":\"\"},on:{\"selection-change\":_vm.changeFun}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"userId\",\"width\":\"400\",\"label\":\"宝贝描述\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"m-production-description\"},[_c('img',{staticClass:\"m-img\",staticStyle:{\"width\":\"0.6rem\",\"height\":\"0.6rem\"},attrs:{\"src\":scope.row.PRimage[0]}}),_vm._v(\" \"),_c('div',[_c('p',[_vm._v(_vm._s(scope.row.PRname))]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(scope.row.PRid))])])])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"userId\",\"label\":\"价格\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"PRstatus\",\"label\":\"状态\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"PRstock\",\"label\":\"库存\"}})],1)],1):_vm._e(),_vm._v(\" \"),( _vm.$store.state.activity.COproduct == '自选商品')?_c('div',{staticClass:\"m-page-box\"},[_c('pagination',{attrs:{\"total\":_vm.page_data.total_page},on:{\"pageChange\":_vm.pageChange}})],1):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"m-bottom-btn m-flex-center\"},[_c('span',{staticClass:\"m-btn\",on:{\"click\":_vm.lastStep}},[_vm._v(\"上一步\")]),_vm._v(\" \"),_c('span',{staticClass:\"m-btn  active\",on:{\"click\":_vm.storeSubmit}},[_vm._v(\"完成\")])])],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-175af030\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/activity/activityStoreStepThree.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-175af030\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./activityStoreStepThree.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./activityStoreStepThree.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./activityStoreStepThree.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-175af030\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./activityStoreStepThree.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-175af030\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/activity/activityStoreStepThree.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}