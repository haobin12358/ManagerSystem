webpackJsonp([8],{Z61q:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("XiPb"),o=e("mYEk"),n=e("mtWM"),l=e.n(n),i=e("P9l9"),r={data:function(){return{name:"管理员首页",role:!1,APname:"",APstart:"",approval_data:[],show_modal:!1,row_data:{APstart:"",PEtype:"",APstatus:"",APtime:"",APremark:""},total_page:0,total_num:0,page_size:10}},components:{pageTitle:s.a,Pagination:o.a},mounted:function(){this.queryData(1),"卖家"==this.$store.state.role&&(this.name="审批中")},methods:{freshClick:function(){this.queryData(1)},topSearch:function(){this.queryData(1)},showModal:function(t,a){this.show_modal=t,a&&(this.row_data=a)},queryData:function(t,a,e){var s=this,o=this;l.a.get(i.a.get_approval,{params:{token:localStorage.getItem("token"),page_size:o.page_size,page_num:t,APname:o.APname,APstart:o.APstart}}).then(function(t){200==t.data.status?(o.approval_data=t.data.data.approvals,o.total_num=t.data.data.count,o.total_page=Math.ceil(o.total_num/o.page_size)):s.$message.error(t.data.message)},function(t){s.$message.error(t.data.message)})},updateApproval:function(t){var a=this,e=this;this.$prompt("请输入"+t+"同意理由","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(s){var o=s.value;l.a.post(i.a.update_approval+"?token="+localStorage.getItem("token"),{APid:a.row_data.APid,APaction:t,APremark:o}).then(function(t){200==t.data.status?(e.show_modal=!1,e.queryData(1),a.$message({type:"success",message:"处理成功 "})):a.$message.error(t.data.message)},function(t){a.$message.error(t.data.message)})}).catch(function(){})},pageChange:function(t){this.queryData(t)}},created:function(){-1!=this.$store.state.role.indexOf("管理员")?this.role=!0:this.role=!1}},c={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"m-user"},[e("page-title",{attrs:{title:t.name,fresh:!0},on:{freshClick:t.freshClick}}),t._v(" "),e("div",{staticClass:"m-content"},[e("div",{staticClass:"m-top"},[e("div",{staticClass:"m-top-search"},[e("div",{staticClass:"m-top-text"},[t._v("申请人：")]),t._v(" "),e("el-input",{staticClass:"m-top-input",attrs:{size:"mini"},model:{value:t.APstart,callback:function(a){t.APstart=a},expression:"APstart"}}),t._v(" "),e("div",{staticClass:"m-top-text"},[t._v("审批名称：")]),t._v(" "),e("el-input",{staticClass:"m-top-input",attrs:{size:"mini"},model:{value:t.APname,callback:function(a){t.APname=a},expression:"APname"}}),t._v(" "),e("el-button",{staticClass:"m-top-search-button",attrs:{size:"mini"},on:{click:t.topSearch}},[t._v("查询")])],1)]),t._v(" "),e("div",{staticClass:"m-middle",staticStyle:{width:"100%"}},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.approval_data,stripe:""}},[e("el-table-column",{attrs:{align:"center",prop:"APstart",label:"申请人"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"APname",label:"审批名称"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"PEtype",label:"审批分类",filters:[{text:"成为卖家审批",value:"成为卖家审批"},{text:"类目使用审批",value:"类目使用审批"},{text:"类目增设审批",value:"类目增设审批"},{text:"商品发布审批",value:"商品发布审批"},{text:"活动发起审批",value:"活动发起审批"}]}}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"APtime",label:"时间"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"APstatus",label:"状态",filters:[{text:"活动发起审批",value:"活动发起审批"},{text:"待审批",value:"待审批"},{text:"审批中",value:"审批中"},{text:"审批结束",value:"审批结束"},{text:"已拒绝",value:"已拒绝"}]},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{class:"待审批"==a.row.APstatus?"m-wait":""},[t._v(t._s(a.row.APstatus))])]}}])}),t._v(" "),e("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{staticClass:"m-table-button",attrs:{size:"mini"},on:{click:function(e){t.showModal(!0,a.row)}}},[t._v("详情")])]}}])})],1)],1),t._v(" "),e("div",{staticClass:"m-bottom"},[e("pagination",{attrs:{total:t.total_page},on:{pageChange:t.pageChange}})],1)]),t._v(" "),e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.show_modal,expression:"show_modal"}],staticClass:"m-modal"},[e("div",{staticClass:"m-modal-state"},[e("div",{staticClass:"m-modal-head m-flex-between"},[e("span",[t._v("审批详情/活动审批")]),t._v(" "),e("span",{staticClass:"m-close",on:{click:function(a){t.showModal(!1)}}},[t._v("X")])]),t._v(" "),e("div",{staticClass:"m-modal-content"},[e("table",{staticClass:"m-table",attrs:{width:"100%"}},[e("thead",[e("tr",[e("td",[t._v("申请人")]),t._v(" "),e("td",[t._v("审批分类")]),t._v(" "),e("td",[t._v("状态")]),t._v(" "),e("td",[t._v("申请时间")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v(t._s(t.row_data.APstart))]),t._v(" "),e("td",[t._v(t._s(t.row_data.PEtype))]),t._v(" "),e("td",[t._v(t._s(t.row_data.APstatus))]),t._v(" "),e("td",[t._v(t._s(t.row_data.APtime))])])])]),t._v(" "),e("div",{staticClass:"m-approve-box"},[e("p",[t._v("申请详情：")]),t._v(" "),e("div",{staticClass:"m-approve-info"},[t._v("   "+t._s(t.row_data.APremark))])])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.role&&"待审批"==t.row_data.APstatus,expression:"role && row_data.APstatus == '待审批'"}],staticClass:"m-modal-foot"},[e("span",{staticClass:"m-btn active",on:{click:function(a){t.updateApproval("同意")}}},[t._v("通过")]),t._v(" "),e("span",{staticClass:"m-btn",on:{click:function(a){t.updateApproval("拒绝")}}},[t._v("否决")])])])])])],1)},staticRenderFns:[]};var v=e("VU/8")(r,c,!1,function(t){e("kZGX")},"data-v-dbd5548c",null);a.default=v.exports},kZGX:function(t,a){}});
//# sourceMappingURL=8.b049de476ab553eb77f4.js.map