webpackJsonp([10],{"9Vj9":function(t,e){},yQb0:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("XiPb"),s=a("QGdL"),r=a("P9l9"),o=a("mtWM"),n=a.n(o),l={data:function(){return{name:"店铺活动>创建/编辑活动",title_list:[{name:"店铺活动",url:"/activity/storeActivity"},{name:"创建/编辑活动",url:"/activity/activityStoreStepOne"}],step:[{name:"基本信息",active:!0,next:!1},{name:"优惠门槛及内容",active:!1,next:!1},{name:"设置商品优惠",active:!1,next:!1}],storeForm:{COstart:"",ACend:"",ACname:"",ACabo:"",ACimage:[],name:""},rules:{COname:[{required:!0,message:"请输入活动名称",trigger:"blur"}],COabo:[{required:!0,message:"请输入活动描述",trigger:"blur"}],COstart:[{required:!0,message:"请选择开始时间",trigger:"blur"}],COend:[{required:!0,message:"请选择结束时间",trigger:"blur"}]},radio:"1",dialogVisible:!1,image:""}},components:{pageTitle:i.a,step:s.a},mounted:function(){this.$route.query.COid?this.getData(this.$route.query.COid):this.$store.state.activity={COabo:"",COname:"",COstatus:"",COstart:"",COend:"",COfilter:null,COother:"",COdiscount:null,COamount:null,COtype:"满减",COunit:"元",COnumber:null,COimage:[],COotherType:"0",COotherContent:["","",""],COproduct:"全店商品",PRids:[],COgenre:"活动",disabled:!1}},methods:{getData:function(t){var e=this;n.a.get(r.a.get_acabo,{params:{token:localStorage.getItem("token"),COid:t}}).then(function(t){console.log(t),200==t.data.status&&(e.$store.state.activity={COabo:t.data.data.COabo,COname:t.data.data.COname,COstatus:t.data.data.COstatus,COstart:t.data.data.COstart,COend:t.data.data.COend,COfilter:t.data.data.COfilter,COother:t.data.data.COother,COdiscount:t.data.data.COdiscount,COamount:t.data.data.COamount,COtype:t.data.data.COtype,COunit:t.data.data.COunit,COnumber:t.data.data.COnumber,COimage:t.data.data.COimage,COotherType:t.data.data.COotherType,COotherContent:["","",""],COproduct:t.data.data.PRids.length>0?"自选商品":"全店商品",PRids:t.data.data.PRids,COgenre:"活动",disabled:!0},e.$store.state.activity.COotherContent[e.$store.state.activity.COotherType]=t.data.data.COother)})},handleRemove:function(t,e){for(var a=[],i=0;i<e.length;i++)a[i]={name:e[i].name,url:e[i].url};this.$store.state.activity.COimage=[].concat(a)},imgUploadTop:function(t){var e=this,a=new FormData;a.append("file",t.file),a.append("FileType","PRimage"),a.append("contentId","123"),a.append("index",1),n.a.post(r.a.upload_files,a).then(function(a){200==a.data.status?e.$store.state.activity.COimage.push({name:t.file.name,url:a.data.data}):e.$message({type:"error",message:"服务器请求失败，请稍后再试 "})},function(t){e.$message({type:"error",message:"服务器请求失败，请稍后再试 "})})},handlePictureCardPreview:function(t){this.image=t.url,this.dialogVisible=!0},outImg:function(){this.$message({message:"上传图片超出数量限制",type:"warning",duration:1e3})},onSubmit:function(){var t=this;this.$refs.storeForm.validate(function(e){e&&t.$router.push("/activity/activityStoreStepTwo?COid="+t.$route.query.COid)})}},created:function(){}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-step"},[a("page-title",{attrs:{list:t.title_list}}),t._v(" "),a("el-form",{ref:"storeForm",staticClass:"demo-ruleForm",attrs:{model:t.$store.state.activity,rules:t.rules,"label-width":"1.2rem",disabled:t.$store.state.activity.disabled}},[a("div",{staticClass:"m-step-content"},[a("h3",{staticClass:"m-step-title"},[t._v("创建新活动")]),t._v(" "),a("div",{staticClass:"m-step-part"},[a("step",{attrs:{list:t.step}})],1),t._v(" "),a("div",{staticClass:"m-step-part"},[a("h4",[t._v("基本信息")]),t._v(" "),a("el-form-item",{attrs:{label:"活动名称：",prop:"COname"}},[a("el-input",{staticClass:"m-input-l",attrs:{placeholder:"最多10个字",maxlength:"10"},model:{value:t.$store.state.activity.COname,callback:function(e){t.$set(t.$store.state.activity,"COname",e)},expression:"$store.state.activity.COname"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"活动描述：",prop:"COabo"}},[a("el-input",{staticClass:"m-input-l",attrs:{placeholder:""},model:{value:t.$store.state.activity.COabo,callback:function(e){t.$set(t.$store.state.activity,"COabo",e)},expression:"$store.state.activity.COabo"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"活动照片:"}},[a("el-upload",{staticClass:"m-img-l",attrs:{action:"http://120.79.182.43:7443/sharp/manager/other/upload_files","list-type":"picture-card","http-request":t.imgUploadTop,"on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove,"file-list":t.$store.state.activity.COimage,limit:1,"on-exceed":t.outImg}},[a("span",[t._v("+添加图片")])]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.image,alt:""}})]),t._v(" "),a("p",{staticClass:"m-img-p"},[t._v("建议尺寸：700*700像素，最多上传1张商品图片")])],1),t._v(" "),a("el-form-item",{attrs:{label:"开始时间：",prop:"COstart"}},[a("el-date-picker",{staticStyle:{width:"2rem"},attrs:{type:"date",placeholder:"请选择时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.$store.state.activity.COstart,callback:function(e){t.$set(t.$store.state.activity,"COstart",e)},expression:"$store.state.activity.COstart"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"结束时间：",prop:"COend"}},[a("el-date-picker",{staticStyle:{width:"2rem"},attrs:{type:"date",placeholder:"请选择时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.$store.state.activity.COend,callback:function(e){t.$set(t.$store.state.activity,"COend",e)},expression:"$store.state.activity.COend"}})],1),t._v(" "),a("div",{staticClass:"m-bottom-btn m-flex-center"},[a("router-link",{attrs:{to:"/activity/storeActivity"}},[a("span",{staticClass:"m-btn active"},[t._v("返回")])]),t._v(" "),a("span",{staticClass:"m-btn",on:{click:t.onSubmit}},[t._v("下一步")])],1)],1)])])],1)},staticRenderFns:[]};var c=a("VU/8")(l,d,!1,function(t){a("9Vj9")},"data-v-b9c98174",null);e.default=c.exports}});
//# sourceMappingURL=10.0bfcf15dd08b5673d1e7.js.map