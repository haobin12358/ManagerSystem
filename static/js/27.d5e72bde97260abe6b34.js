webpackJsonp([27],{"8UAI":function(t,a){},wgzB:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("XiPb"),s=e("mYEk"),n=e("Qwu5"),o=e("JSnz"),c=e("z1Sx"),r=e("mtWM"),l=e.n(r),u=e("P9l9"),d={data:function(){return{name:"店铺活动",storeForm:{COname:"",COid:"",COstatus:""},tab_data:{activity:{name:"活动管理",url:"activity",show:!0},dataInfo:{name:"数据概况",url:"dataInfo",show:!1}},data_detail:[{name:"领取张数",num:20,down_up:"down",click:!0},{name:"使用张数",num:20,down_up:"down",click:!1},{name:"优惠金额",num:20,down_up:"down",click:!1},{name:"支付买家数",num:20,down_up:"down",click:!1},{name:"支付件数",num:20,down_up:"down",click:!1},{name:"交易金额",num:20,down_up:"down",click:!1}],activity_data:[],option:{color:["#edb3b1"],tooltip:{show:!0,position:"top",padding:10,backgroundColor:"#edb3b1",textStyle:{color:"#fff",fontSize:21}},xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],axisLine:{show:!1}},yAxis:{type:"value",axisLine:{show:!1}},series:[{data:[820,932,901,934,1290,1330,1320],type:"line"}]},option_data:[],pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(t){var a=new Date,e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",[e,a])}},{text:"最近一个月",onClick:function(t){var a=new Date,e=new Date;e.setTime(e.getTime()-2592e6),t.$emit("pick",[e,a])}},{text:"最近三个月",onClick:function(t){var a=new Date,e=new Date;e.setTime(e.getTime()-7776e6),t.$emit("pick",[e,a])}}]},situation_date:"",page_data:{total_page:0,current_page:1,total_num:0,page_size:10}}},components:{pageTitle:i.a,Pagination:s.a,tabs:n.a,"num-list":o.a,"m-echarts":c.a},mounted:function(){this.getData(),this.getSituation()},methods:{getData:function(t,a,e,i){var s=this,n={token:localStorage.getItem("token"),page_num:t||this.page_data.current_page,page_size:this.page_data.page_size,COname:a,COid:e,COstatus:i,COgenre:"活动"};l.a.get(u.a.get_all_card,{params:n}).then(function(t){200==t.data.status?(s.activity_data=t.data.CouponsActives,s.page_data.total_num=t.data.count,s.page_data.total_page=Math.ceil(s.page_data.total_num/s.page_data.page_size)):s.$message.error(t.data.message)},function(t){s.$message.error(t.data.message)})},getSituation:function(){var t=this;l.a.get(u.a.get_situation,{params:{token:localStorage.getItem("token"),COgenre:"活动",start_time:this.situation_date[0]||"",end_time:this.situation_date[1]||""}}).then(function(a){if(200==a.data.status){t.data_detail=a.data.data.params,t.option_data=a.data.data.data,t.dealOption(0);for(var e=0;e<t.data_detail.length;e++)t.data_detail[e].click=!1;t.data_detail[0].click=!0}else t.$message.error(a.data.message)},function(a){t.$message.error(a.data.message)})},dealOption:function(t){var a=[],e=[];for(var i in this.option_data)a.push(i.slice(0,11)),e.push(this.option_data[i][t]);this.option.xAxis.data=[].concat(a),this.option.series[0].data=[].concat(e)},dateChange:function(){this.getSituation()},freshClick:function(){this.getData(),this.getSituation()},storeSubmit:function(){this.getData(1,this.storeForm.COname,this.storeForm.COid,this.storeForm.COstatus)},tabChange:function(t){for(var a in this.tab_data[t].show=!0,this.tab_data)a!=t&&(this.tab_data[a].show=!1)},storeCardClick:function(){this.$router.push("/activity/activityStoreStepOne")},numListClick:function(t){for(var a=this.data_detail,e=0;e<a.length;e++)a[e].click=!1;a[t].click=!0,this.data_detail=[].concat(a),this.dealOption(t)},checkActivity:function(t){this.$router.push("/activity/activityStoreStepOne?COid="+t.COid)},deleteActivity:function(t){var a=this;this.$confirm("确认将选中商品删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.changeStatus(t,"删除")}).catch(function(){})},pauseActivity:function(t){var a=this;this.$confirm("确认将选中商品暂停吗 ?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.changeStatus(t,"暂停")}).catch(function(){})},restartActivity:function(t){var a=this;this.$confirm("确认将选中商品重启吗 ?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.changeStatus(t,"进行中")}).catch(function(){})},changeStatus:function(t,a){var e=this;l.a.post(u.a.update_active_status+"?token="+localStorage.getItem("token"),{COid:t.COid,COstatus:a}).then(function(t){200==t.data.status?(e.$message({message:"更新成功",type:"success"}),e.getData()):e.$message.error(t.data.message)},function(t){e.$message.error(t.data.message)})},pageChange:function(t){if(t==this.page_data.current_page)return this.$message({message:"这已经是第"+t+"页数据了",type:"warning"}),!1;this.page_data.current_page=t,this.getData(t)}},created:function(){}},m={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"m-discount-index"},[e("page-title",{attrs:{title:t.name,fresh:!0},on:{freshClick:t.freshClick}}),t._v(" "),e("div",{staticClass:"m-discount-content"},[e("div",{staticClass:"m-discount-top"},[e("ul",{staticClass:"m-store-top"},[e("li",{staticClass:"m-store-card",on:{click:t.storeCardClick}},[t._m(0),t._v(" "),t._m(1)])])]),t._v(" "),e("tabs",{attrs:{tab_data:t.tab_data},on:{tabChange:t.tabChange}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.tab_data.activity.show,expression:"tab_data.activity.show"}],staticClass:"m-store"},[e("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.storeForm}},[e("div",{staticClass:"m-select-box"},[e("div",{staticClass:"m-left"},[e("el-form-item",{attrs:{label:"活动状态"}},[e("el-select",{staticClass:"m-input-s",attrs:{placeholder:"活动区域"},model:{value:t.storeForm.COstatus,callback:function(a){t.$set(t.storeForm,"COstatus",a)},expression:"storeForm.COstatus"}},[e("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),e("el-option",{attrs:{label:"预热",value:"预热"}}),t._v(" "),e("el-option",{attrs:{label:"进行中",value:"进行中"}}),t._v(" "),e("el-option",{attrs:{label:"暂停",value:"暂停"}}),t._v(" "),e("el-option",{attrs:{label:"结束",value:"介绍"}})],1)],1),t._v(" "),e("el-form-item",{attrs:{label:"活动名称"}},[e("el-input",{staticClass:"m-input-s",attrs:{placeholder:""},model:{value:t.storeForm.COname,callback:function(a){t.$set(t.storeForm,"COname",a)},expression:"storeForm.COname"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"活动编号"}},[e("el-input",{staticClass:"m-input-s",attrs:{placeholder:""},model:{value:t.storeForm.COid,callback:function(a){t.$set(t.storeForm,"COid",a)},expression:"storeForm.COid"}})],1),t._v(" "),e("el-form-item",[e("el-button",{staticClass:"m-select-btn",attrs:{type:"primary"},on:{click:t.storeSubmit}},[t._v("查询")])],1)],1)])]),t._v(" "),e("div",{staticClass:"m-middle",staticStyle:{width:"100%","margin-top":"0.1rem"}},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.activity_data,stripe:""}},[e("el-table-column",{attrs:{align:"center",prop:"COid",label:"名称编号"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"COname",label:"活动名称"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"COabo",label:"活动详情"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"group",label:"活动时间",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"m-activity-time"},[e("p",[t._v(t._s(a.row.COstart))]),t._v(" "),e("p",[t._v("至")]),t._v(" "),e("p",[t._v(t._s(a.row.COend))])]),t._v(" "),e("p",[t._v("活动持续：1"+t._s(a.row.duration))])]}}])}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"COstatus",label:"活动状态"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"m-link m-first",on:{click:function(e){t.checkActivity(a.row)}}},[t._v("查看")]),t._v(" "),e("span",{staticClass:"m-link",on:{click:function(e){t.deleteActivity(a.row)}}},[t._v("删除")]),t._v(" "),e("span",{staticClass:"m-link",on:{click:function(e){t.pauseActivity(a.row)}}},[t._v("暂停")]),t._v(" "),"暂停"==a.row.COstatus?e("span",{staticClass:" m-link",on:{click:function(e){t.restartActivity(a.row)}}},[t._v("重启")]):t._e()]}}])})],1)],1),t._v(" "),e("div",{staticClass:"m-page-box"},[e("Pagination",{attrs:{total:t.page_data.total_page},on:{pageChange:t.pageChange}})],1)],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.tab_data.dataInfo.show,expression:"tab_data.dataInfo.show"}],staticClass:"m-data-info"},[e("p",{staticClass:"m-date"},[e("span",[t._v("日")]),t._v(" "),e("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions2,"value-format":"yyyy-MM-dd HH:mm:ss"},on:{change:t.dateChange},model:{value:t.situation_date,callback:function(a){t.situation_date=a},expression:"situation_date"}})],1),t._v(" "),e("num-list",{attrs:{num_data:t.data_detail},on:{numListClick:t.numListClick}}),t._v(" "),e("m-echarts",{attrs:{width:1e3,height:300,option:t.option,id:"storeActivity"}})],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"m-card-left"},[a("span",{staticClass:"m-card-icon"})])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"m-card-right"},[a("p",{staticClass:"m-title"},[this._v("+创建新活动")]),this._v(" "),a("p",[this._v("自定义创建店铺活动")])])}]};var p=e("VU/8")(d,m,!1,function(t){e("8UAI")},"data-v-08fc8705",null);a.default=p.exports}});
//# sourceMappingURL=27.d5e72bde97260abe6b34.js.map