webpackJsonp([21],{"Bd/J":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("XiPb"),o=e("mYEk"),l=e("Qwu5"),i=e("JSnz"),n=e("z1Sx"),r=e("mtWM"),c=e.n(r),m=e("P9l9"),d={data:function(){return{id:"discountCoupon",name:"优惠券",storeForm:{COstatus:"",COstart:"",COend:"",COname:""},tab_data:{dataInfo:{name:"数据概况",url:"dataInfo",show:!0},store:{name:"店铺优惠劵",url:"store",show:!1},commodity:{name:"平台优惠券",url:"commodity",show:!1}},data_detail:[{name:"领取张数",num:20,down_up:"down",click:!0},{name:"使用张数",num:20,down_up:"down",click:!1},{name:"优惠金额",num:20,down_up:"down",click:!1},{name:"支付件数",num:20,down_up:"down",click:!1},{name:"交易金额",num:20,down_up:"down",click:!1}],option:{color:["#edb3b1"],tooltip:{show:!0,position:"top",padding:10,backgroundColor:"#edb3b1",textStyle:{color:"#fff",fontSize:21}},xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],axisLine:{show:!1}},yAxis:{type:"value",axisLine:{show:!1}},series:[{data:[820,932,901,934,1290,1330,1320],type:"line"}]},option_data:[],pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(t){var a=new Date,e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",[e,a])}},{text:"最近一个月",onClick:function(t){var a=new Date,e=new Date;e.setTime(e.getTime()-2592e6),t.$emit("pick",[e,a])}},{text:"最近三个月",onClick:function(t){var a=new Date,e=new Date;e.setTime(e.getTime()-7776e6),t.$emit("pick",[e,a])}}]},situation_date:"",page_data:{total_page:0,current_page:1,total_num:0,page_size:10},store_data:[],platform_data:[]}},components:{pageTitle:s.a,Pagination:o.a,tabs:l.a,"num-list":i.a,"m-echarts":n.a},methods:{getStoreData:function(t,a,e,s,o,l,i){var n=this,r={token:localStorage.getItem("token"),page_num:t||this.page_data.current_page,page_size:this.page_data.page_size,COname:a,COid:e,COstatus:s,COstart:o,COend:l,COtype:i,COgenre:"优惠券"};c.a.get(m.a.get_all_card,{params:r}).then(function(t){200==t.data.status?(n.store_data=t.data.CouponsActives,n.page_data.total_num=t.data.count,n.page_data.total_page=Math.ceil(n.page_data.total_num/n.page_data.page_size)):n.$message.error(t.data.message)},function(t){n.$message.error(t.data.message)})},getSituation:function(){var t=this;c.a.get(m.a.get_situation,{params:{token:localStorage.getItem("token"),COgenre:"优惠券",start_time:this.situation_date[0]||"",end_time:this.situation_date[1]||""}}).then(function(a){if(200==a.data.status){t.data_detail=a.data.data.params,t.option_data=a.data.data.data,t.dealOption(0);for(var e=0;e<t.data_detail.length;e++)t.data_detail[e].click=!1;t.data_detail[0].click=!0}else t.$message.error(a.data.message)},function(a){t.$message.error(a.data.message)})},dealOption:function(t){var a=[],e=[];for(var s in this.option_data)a.push(s.slice(0,11)),e.push(this.option_data[s][t]);this.option.xAxis.data=[].concat(a),this.option.series[0].data=[].concat(e)},freshClick:function(){this.getStoreData(),this.getSituation()},storeSubmit:function(){this.getStoreData(1,this.storeForm.COname,"",this.storeForm.COstatus,this.storeForm.COstart,this.storeForm.COend,this.storeForm.COtype)},tabChange:function(t){for(var a in this.tab_data[t].show=!0,this.tab_data)a!=t&&(this.tab_data[a].show=!1)},storeEdit:function(t,a){"store"==a&&this.$router.push("/activity/discountStoreStepOne?COid="+t.COid)},numListClick:function(t){for(var a=this.data_detail,e=0;e<a.length;e++)a[e].click=!1;a[t].click=!0,this.data_detail=[].concat(a),this.dealOption(t)},dateChange:function(){this.getSituation()},pageChange:function(t){if(t==this.current_page)return this.$message({message:"这已经是第"+t+"页数据了",type:"warning"}),!1;this.current_page=t}},mounted:function(){this.getStoreData(),this.getSituation()},created:function(){}},p={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"m-discount-index"},[e("page-title",{attrs:{title:t.name,fresh:!0},on:{freshClick:t.freshClick}}),t._v(" "),e("div",{staticClass:"m-discount-content"},[e("div",{staticClass:"m-discount-top"},[e("div",{staticClass:"m-discount-top-part"},[e("div",{staticClass:"m-top-img"}),t._v(" "),e("div",{staticClass:"m-top-info"},[e("p",[t._v("优惠券")]),t._v(" "),e("p",{staticClass:"m-info-grey"},[t._v("可通过多种渠道推广的电子券，通过设置优惠金额和使用门槛，刺激转化提高客单，")]),t._v(" "),e("p",{staticClass:"m-info-grey"},[t._v("包括店铺优惠券和商品优惠券。")]),t._v(" "),e("p",[t._v("店铺优惠券：已创建 "),e("span",{staticClass:"m-num"},[t._v(t._s(t.page_data.total_num))]),t._v(" 个    平台优惠券：已创建 "),e("span",{staticClass:"m-num"},[t._v("0")]),t._v(" 个")])])]),t._v(" "),e("div",{staticClass:"m-discount-top-part"},[e("router-link",{attrs:{to:"/activity/discountStoreStepOne"}},[e("div",{staticClass:"m-top-btn"},[t._v("+店铺优惠券")])]),t._v(" "),e("router-link",{attrs:{to:"/activity/discountProductStepOne"}},[e("div",{staticClass:"m-top-btn"},[t._v("+平台优惠券")])])],1)]),t._v(" "),e("tabs",{attrs:{tab_data:t.tab_data},on:{tabChange:t.tabChange}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.tab_data.dataInfo.show,expression:"tab_data.dataInfo.show"}],staticClass:"m-data-info"},[e("p",{staticClass:"m-date"},[e("span",[t._v("日")]),t._v(" "),e("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions2,"value-format":"yyyy-MM-dd HH:mm:ss"},on:{change:t.dateChange},model:{value:t.situation_date,callback:function(a){t.situation_date=a},expression:"situation_date"}})],1),t._v(" "),e("num-list",{attrs:{num_data:t.data_detail},on:{numListClick:t.numListClick}}),t._v(" "),e("m-echarts",{attrs:{width:1e3,height:300,option:t.option,id:t.id}})],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.tab_data.store.show,expression:"tab_data.store.show"}],staticClass:"m-store"},[e("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.storeForm}},[e("div",{staticClass:"m-select-box"},[e("div",{staticClass:"m-left"},[e("el-form-item",{attrs:{label:"活动状态"}},[e("el-select",{staticClass:"m-input-s",attrs:{placeholder:"活动区域"},model:{value:t.storeForm.COstatus,callback:function(a){t.$set(t.storeForm,"COstatus",a)},expression:"storeForm.COstatus"}},[e("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),e("el-option",{attrs:{label:"预热",value:"预热"}}),t._v(" "),e("el-option",{attrs:{label:"进行中",value:"进行中"}}),t._v(" "),e("el-option",{attrs:{label:"暂停",value:"暂停"}}),t._v(" "),e("el-option",{attrs:{label:"结束",value:"介绍"}})],1)],1),t._v(" "),e("el-form-item",{attrs:{label:"优惠券名称"}},[e("el-input",{staticClass:"m-input-s",attrs:{placeholder:""},model:{value:t.storeForm.COname,callback:function(a){t.$set(t.storeForm,"COname",a)},expression:"storeForm.COname"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"类型"}},[e("el-select",{staticClass:"m-input-s",attrs:{placeholder:"活动区域"},model:{value:t.storeForm.COstatus,callback:function(a){t.$set(t.storeForm,"COstatus",a)},expression:"storeForm.COstatus"}},[e("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),e("el-option",{attrs:{label:"满减",value:"满减"}}),t._v(" "),e("el-option",{attrs:{label:"满折",value:"满折"}}),t._v(" "),e("el-option",{attrs:{label:"其它",value:"其它"}})],1)],1),t._v(" "),e("el-form-item",{attrs:{label:"时间"}},[e("el-date-picker",{staticClass:"m-input-s",staticStyle:{width:"1.2rem"},attrs:{type:"date",placeholder:"起始时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.storeForm.COstart,callback:function(a){t.$set(t.storeForm,"COstart",a)},expression:"storeForm.COstart"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"-"}},[e("el-date-picker",{staticClass:"m-input-s",staticStyle:{width:"1.2rem"},attrs:{type:"date",placeholder:"结束时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.storeForm.COend,callback:function(a){t.$set(t.storeForm,"COend",a)},expression:"storeForm.COend"}})],1)],1),t._v(" "),e("div",{staticClass:"m-right"},[e("el-form-item",[e("el-button",{staticClass:"m-select-btn",attrs:{type:"primary"},on:{click:t.storeSubmit}},[t._v("查询")])],1)],1)])]),t._v(" "),e("div",{staticClass:"m-middle",staticStyle:{width:"100%","margin-top":"0.1rem"}},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.store_data,stripe:""}},[e("el-table-column",{attrs:{align:"center",prop:"COname",label:"名称/渠道"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"COstatus",label:"状态"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"COfilter",label:"面额"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"COfilter",label:"门槛"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"group",label:"使用时间",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("p",[t._v("起："+t._s(a.row.COstart))]),t._v(" "),e("p",[t._v("止："+t._s(a.row.COend))])]}}])}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"COuserfilter",label:"每人限额"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"COnumber",label:"发行量"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"get_num",label:"已领取"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"m-link m-first",on:{click:function(e){t.storeEdit(a.row,"store")}}},[t._v("查看")])]}}])})],1)],1),t._v(" "),e("div",{staticClass:"m-page-box"},[e("Pagination",{attrs:{total:t.page_data.total_page},on:{pageChange:t.pageChange}})],1)],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.tab_data.commodity.show,expression:"tab_data.commodity.show"}],staticClass:"m-commodity"},[e("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.storeForm}},[e("div",{staticClass:"m-select-box"},[e("div",{staticClass:"m-left"},[e("el-form-item",{attrs:{label:"活动状态"}},[e("el-select",{staticClass:"m-input-s",attrs:{placeholder:"活动区域"},model:{value:t.storeForm.name,callback:function(a){t.$set(t.storeForm,"name",a)},expression:"storeForm.name"}},[e("el-option",{attrs:{label:"区域一",value:"shanghai"}}),t._v(" "),e("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1),t._v(" "),e("el-form-item",{attrs:{label:"优惠券名称"}},[e("el-input",{staticClass:"m-input-s",attrs:{placeholder:"审批人"},model:{value:t.storeForm.name,callback:function(a){t.$set(t.storeForm,"name",a)},expression:"storeForm.name"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"面额"}},[e("el-input",{staticClass:"m-input-s",attrs:{placeholder:"审批人"},model:{value:t.storeForm.name,callback:function(a){t.$set(t.storeForm,"name",a)},expression:"storeForm.name"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"时间"}},[e("el-date-picker",{staticClass:"m-input-s",staticStyle:{width:"1.2rem"},attrs:{type:"date",placeholder:"起始时间"},model:{value:t.storeForm.date1,callback:function(a){t.$set(t.storeForm,"date1",a)},expression:"storeForm.date1"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"-"}},[e("el-date-picker",{staticClass:"m-input-s",staticStyle:{width:"1.2rem"},attrs:{type:"date",placeholder:"结束时间"},model:{value:t.storeForm.date2,callback:function(a){t.$set(t.storeForm,"date2",a)},expression:"storeForm.date2"}})],1)],1),t._v(" "),e("div",{staticClass:"m-right"},[e("el-form-item",[e("el-button",{staticClass:"m-select-btn",attrs:{type:"primary"},on:{click:t.storeSubmit}},[t._v("查询")])],1)],1)])]),t._v(" "),e("div",{staticClass:"m-middle",staticStyle:{width:"100%","margin-top":"0.1rem"}},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.platform_data,stripe:""}},[e("el-table-column",{attrs:{align:"center",prop:"userId",label:"名称/渠道"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"userId",label:"状态"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"userName",label:"面额"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"group",label:"门槛"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"group",label:"使用时间",width:"300"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("p",[t._v("起：2018-07-02")]),t._v(" "),e("p",[t._v("止：2018-07-08")])]}}])}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"group",label:"限额"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"loginTime",label:"发行量"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"group",label:"已领取"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"m-link m-first",on:{click:t.storeEdit}},[t._v("编辑")])]}}])})],1)],1),t._v(" "),e("div",{staticClass:"m-page-box"},[e("Pagination",{attrs:{total:t.page_data.total_page},on:{pageChange:t.pageChange}})],1)],1)],1)],1)},staticRenderFns:[]};var u=e("VU/8")(d,p,!1,function(t){e("WHpJ")},"data-v-2ed73417",null);a.default=u.exports},WHpJ:function(t,a){}});
//# sourceMappingURL=21.4d0efc59d8ccb8f5139b.js.map