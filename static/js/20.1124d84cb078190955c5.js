webpackJsonp([20],{XK5U:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("XiPb"),i=a("mYEk"),o=a("P9l9"),l=(a("zL8q"),a("mtWM")),n=a.n(l),r={data:function(){return{name:"用户数据管理",inputID:"",inputName:"",userList:[],addUserVisible:!1,addForm:{userName:"",email:"",password:"",againPassword:""},addFormWidth:"1rem",total_page:0,current_page:0,total_num:0,page_size:10,searchText:""}},components:{Pagination:i.a,pageTitle:s.a},methods:{getData:function(t){var e=this,a={token:localStorage.getItem("token"),page_num:t||this.current_page,page_size:this.page_size,USfilter:this.searchText};n.a.get(o.a.get_users,{params:a}).then(function(t){200==t.data.status?(e.userList=t.data.data.USers,e.total_num=t.data.data.count,e.total_page=Math.ceil(e.total_num/e.page_size)):e.$message.error(t.data.message)},function(t){e.$message.error(t.data.message)})},pageChange:function(t){if(t==this.current_page)return this.$message({message:"这已经是第"+t+"页数据了",type:"warning"}),!1;this.current_page=t,this.getData(t)},freshClick:function(){console.log("fresh")},topSearch:function(){this.getData(1)},lockUser:function(t,e){var a=this;console.log(t),this.userName=t.USname,this.$confirm("确认"+e+"用户名为 "+this.userName+" 的用户吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){var s=a,i={UStelphone:t.UStelphone,USstatus:e};n.a.post(o.a.update_users+"?token="+localStorage.getItem("token"),i).then(function(t){console.log(t),200==t.data.status&&(a.$message({message:t.data.message,type:"success"}),s.getData())})}).catch(function(){a.$message({type:"info",message:"操作取消"})})},addUser:function(){console.log("添加用户")}},created:function(){this.pageChange(1)}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-user"},[a("page-title",{attrs:{title:t.name},on:{freshClick:t.freshClick}}),t._v(" "),a("div",{staticClass:"m-content"},[a("div",{staticClass:"m-top"},[a("div",{staticClass:"m-top-search"},[a("div",{staticClass:"m-top-text"},[t._v("查询条件：")]),t._v(" "),a("el-input",{staticClass:"m-top-input",staticStyle:{width:"20%"},attrs:{size:"mini",placeholder:"请输入用户名或联系方式",clearable:""},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}}),t._v(" "),a("el-button",{staticClass:"m-top-search-button",attrs:{size:"mini"},on:{click:t.topSearch}},[t._v("查询")])],1),t._v(" "),a("div",{staticClass:"m-top-button"},[a("el-button",{staticClass:"m-top-button-button",attrs:{size:"mini"},on:{click:function(e){t.addUserVisible=!0}}},[t._v("添加用户")])],1)]),t._v(" "),a("div",{staticClass:"m-middle"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.userList,stripe:""}},[a("el-table-column",{attrs:{align:"center",prop:"USname",label:"用户名"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"UStelphone",label:"联系方式"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"USsex",label:"性别",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"UScreateTime",label:"创建时间"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"USloginTime",label:"最近登录"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"USstatus",label:"状态",width:"70"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return["禁用"==e.row.USstatus?a("div",[a("el-button",{staticClass:"lock-user-button",attrs:{type:"text"},on:{click:function(a){t.lockUser(e.row,"可用")}}},[t._v("解封")])],1):t._e(),t._v(" "),"可用"==e.row.USstatus?a("div",[a("el-button",{staticClass:"lock-user-button",attrs:{type:"text"},on:{click:function(a){t.lockUser(e.row,"禁用")}}},[t._v("封禁")])],1):t._e(),t._v(" "),"未激活"==e.row.USstatus?a("div",[a("el-button",{staticClass:"lock-user-button",attrs:{type:"text"},on:{click:function(a){t.lockUser(e.row,"可用")}}},[t._v("激活")])],1):t._e()]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"添加用户",visible:t.addUserVisible,width:"30%",center:""},on:{"update:visible":function(e){t.addUserVisible=e}}},[a("div",{staticClass:"add-dialog"},[a("el-form",{attrs:{model:t.addForm}},[a("el-form-item",{attrs:{label:"用户名：","label-width":t.addFormWidth}},[a("el-input",{attrs:{size:"mini"},model:{value:t.addForm.userName,callback:function(e){t.$set(t.addForm,"userName",e)},expression:"addForm.userName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"邮箱：","label-width":t.addFormWidth}},[a("el-input",{attrs:{size:"mini"},model:{value:t.addForm.email,callback:function(e){t.$set(t.addForm,"email",e)},expression:"addForm.email"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密码：","label-width":t.addFormWidth}},[a("el-input",{attrs:{size:"mini"},model:{value:t.addForm.password,callback:function(e){t.$set(t.addForm,"password",e)},expression:"addForm.password"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"确认密码：","label-width":t.addFormWidth}},[a("el-input",{attrs:{size:"mini"},model:{value:t.addForm.againPassword,callback:function(e){t.$set(t.addForm,"againPassword",e)},expression:"addForm.againPassword"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",staticStyle:{"margin-top":"0.2rem"},attrs:{slot:"footer",align:"right"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.addUserVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{staticClass:"add-user-done",attrs:{size:"mini"},on:{click:function(e){t.addUserVisible=!1}}},[t._v("确 定")])],1)],1)])],1),t._v(" "),a("div",{staticClass:"m-bottom"},[a("Pagination",{attrs:{total:t.total_page},on:{pageChange:t.pageChange}})],1)])],1)},staticRenderFns:[]};var d=a("VU/8")(r,c,!1,function(t){a("sU4W")},"data-v-344e8abb",null);e.default=d.exports},sU4W:function(t,e){}});
//# sourceMappingURL=20.1124d84cb078190955c5.js.map