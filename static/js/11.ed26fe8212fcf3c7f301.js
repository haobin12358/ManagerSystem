webpackJsonp([11],{"Dd+X":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("XiPb"),i=a("QGdL"),r=a("mtWM"),o=a.n(r),n=a("P9l9"),l={data:function(){return{title_list:[{name:"店铺活动",url:"/activity/storeActivity"},{name:"创建/编辑活动",url:"/activity/activityStoreStepTwo"}],step:[{name:"基本信息",active:!0,next:!0},{name:"优惠门槛及内容",active:!0,next:!1},{name:"设置商品优惠",active:!1,next:!1}],layer_data:[1],storeForm:{name:"",date1:"",ACtype:"1",ACdiscount:.8,ACamount:""},rules:{COtype:[{required:!0,message:"请输入活动优惠类型",trigger:"blur"}],COfilter:[{required:!0,message:"请输入优惠门槛",trigger:"blur"}],COunit:[{required:!0,message:"请选择优惠内容",trigger:"blur"}],ACend:[{required:!0,message:"请选择结束时间",trigger:"blur"}],ACbrand:[{required:!0,message:"请选择优惠类型",trigger:"blur"}]},discount_data:[]}},components:{pageTitle:s.a,step:i.a},mounted:function(){var t=this.$store.state.activity;if(!(t.COname&&t.COabo&&t.COstart&&t.COend))return this.$message({type:"warning",message:"请先填写第一步内容",duration:1e3}),this.$router.push("/activity/activityStoreStepOne"),!1;this.$route.query.COid&&(this.$store.state.activity.COotherContent[2]=this.$route.query.COid),this.getData()},methods:{getData:function(){var t=this,e={token:localStorage.getItem("token"),page_num:1,page_size:100,COgenre:"优惠券"};o.a.get(n.a.get_all_card,{params:e}).then(function(e){200==e.data.status?t.discount_data=e.data.CouponsActives:t.$message.error(e.data.message)},function(e){t.$message.error(e.data.message)})},freshClick:function(){console.log("fresh")},addLayer:function(){this.layer_data.push(1)},cutLayer:function(t){var e=this;if(this.layer_data.length<=1)return this.$message({type:"warning",message:"默认至少一个层级"}),!1;this.$confirm("此操作将永久删除该层级, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.layer_data.splice(t,1),e.$message({type:"success",message:"删除成功!"})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},onSubmit:function(){this.$router.push("/activity/activityStoreStepThree?COid="+this.$route.query.COid)},lastStep:function(){this.$router.push("/activity/activityStoreStepOne")},addNewDiscount:function(){this.$router.push("/activity/discountStoreStepOne?router=activity")}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-step"},[a("page-title",{attrs:{list:t.title_list},on:{freshClick:t.freshClick}}),t._v(" "),a("el-form",{staticClass:"demo-ruleForm",attrs:{model:t.$store.state.activity,rules:t.rules,"label-width":"1.2rem",disabled:t.$store.state.activity.disabled}},[a("div",{staticClass:"m-step-content"},[a("h3",{staticClass:"m-step-title"},[t._v("创建新活动")]),t._v(" "),a("div",{staticClass:"m-step-part"},[a("step",{attrs:{list:t.step}})],1),t._v(" "),a("div",{staticClass:"m-step-part"},[a("h3",{staticClass:"m-step-h3 m-flex-between"},[a("span",[t._v("活动名称："+t._s(t.$store.state.activity.COname))])]),t._v(" "),a("div",[a("table",{staticClass:"m-activity-table"},[a("tr",[a("td",{attrs:{width:"250"}},[t._v("活动描述："),a("span",[t._v(t._s(t.$store.state.activity.COabo))])]),t._v(" "),a("td",[t._v("活动时间："),a("span",[t._v(t._s(t.$store.state.activity.COstart)+" 至 "+t._s(t.$store.state.activity.COend))])])]),t._v(" "),a("tr",[a("td",[t._v("活动类型："),a("span",[t._v(t._s(t.$store.state.activity.COtype))])]),t._v(" "),a("td",[t._v("活动预热："),a("span",[t._v("预热")])])])])])]),t._v(" "),a("div",{staticClass:"m-step-part"},[a("h4",[t._v("基本信息")]),t._v(" "),a("el-form-item",{attrs:{label:"优惠类型：",prop:"COtype"}},[a("p",{staticClass:"m-alert-box"},[a("el-radio",{attrs:{label:"满折"},model:{value:t.$store.state.activity.COtype,callback:function(e){t.$set(t.$store.state.activity,"COtype",e)},expression:"$store.state.activity.COtype"}},[t._v("满折（打折）")]),t._v(" "),a("span",{staticClass:"m-alert-icon"}),t._v(" "),a("span",{staticClass:"m-alert-info"},[t._v("设置折扣前请务必确保您的折扣基准价是法律规定的原价（前七天最低价，详见《淘宝价格发布规范》 ），若不是，请您返回商品发布页对价格进行修改，否则由此产生的价格欺诈等法律责任需由您自行承担。")])],1),t._v(" "),a("p",[a("el-radio",{attrs:{label:"满减"},model:{value:t.$store.state.activity.COtype,callback:function(e){t.$set(t.$store.state.activity,"COtype",e)},expression:"$store.state.activity.COtype"}},[t._v("满元（减钱）")])],1),t._v(" "),a("p",{staticClass:"m-margin-bottom"},[a("el-radio",{attrs:{label:"其它"},model:{value:t.$store.state.activity.COtype,callback:function(e){t.$set(t.$store.state.activity,"COtype",e)},expression:"$store.state.activity.COtype"}},[t._v("其它")])],1)]),t._v(" "),t._l(t.layer_data,function(e,s){return[a("div",[a("h4",[t._v("优惠门槛及内容")]),t._v(" "),a("el-form-item",{attrs:{label:"优惠门槛：",prop:"COfilter"}},[a("span",[t._v("满 ")]),t._v(" "),a("el-input",{staticClass:"m-input-s",attrs:{type:"number",placeholder:""},model:{value:t.$store.state.activity.COfilter,callback:function(e){t.$set(t.$store.state.activity,"COfilter",e)},expression:"$store.state.activity.COfilter"}}),t._v(" "),a("el-radio",{attrs:{label:"元"},model:{value:t.$store.state.activity.COunit,callback:function(e){t.$set(t.$store.state.activity,"COunit",e)},expression:"$store.state.activity.COunit"}},[t._v("元")]),t._v(" "),a("el-radio",{attrs:{label:"件"},model:{value:t.$store.state.activity.COunit,callback:function(e){t.$set(t.$store.state.activity,"COunit",e)},expression:"$store.state.activity.COunit"}},[t._v("件")])],1),t._v(" "),a("el-form-item",{attrs:{label:"优惠内容：",prop:"COunit"}},["满折"==t.$store.state.activity.COtype?a("div",[a("p",{staticClass:"m-alert-box"},[a("span",[t._v("打")]),t._v(" "),a("el-input",{staticClass:"m-input-s",attrs:{type:"number",placeholder:"值为0-1之间"},model:{value:t.$store.state.activity.COdiscount,callback:function(e){t.$set(t.$store.state.activity,"COdiscount",e)},expression:"$store.state.activity.COdiscount"}}),t._v(" "),a("span",[t._v(" 折")]),t._v(" "),a("span",{staticClass:"m-alert-icon"}),t._v(" "),a("span",{staticClass:"m-alert-info m-alert-info-a"},[t._v("设置折扣前请务必确保您的折扣基准价是法律规定的原价（前七天最低价，详见《淘宝价格发布规范》 ），若不是，请您返回商品发布页对价格进行修改，否则由此产生的价格欺诈等法律责任需由您自行承担。")])],1)]):t._e(),t._v(" "),"满减"==t.$store.state.activity.COtype?a("div",[a("p",{staticClass:"m-alert-box"},[a("span",[t._v("减")]),t._v(" "),a("el-input",{staticClass:"m-input-s",attrs:{type:"number",placeholder:""},model:{value:t.$store.state.activity.COamount,callback:function(e){t.$set(t.$store.state.activity,"COamount",e)},expression:"$store.state.activity.COamount"}}),t._v(" "),a("span",[t._v(" 元")]),t._v(" "),a("span",{staticClass:"m-alert-icon"}),t._v(" "),a("span",{staticClass:"m-alert-info m-alert-info-a"},[t._v("设置折扣前请务必确保您的折扣基准价是法律规定的原价（前七天最低价，详见《淘宝价格发布规范》 ），若不是，请您返回商品发布页对价格进行修改，否则由此产生的价格欺诈等法律责任需由您自行承担。")])],1)]):t._e(),t._v(" "),"其它"==t.$store.state.activity.COtype?a("div",{staticClass:"m-radio-p"},[a("p",[a("el-radio",{attrs:{label:"0"},model:{value:t.$store.state.activity.COotherType,callback:function(e){t.$set(t.$store.state.activity,"COotherType",e)},expression:"$store.state.activity.COotherType"}},[t._v("包邮")]),t._v(" "),0==t.$store.state.activity.COotherType?a("el-input",{staticClass:"m-input-m",attrs:{placeholder:"备注"},model:{value:t.$store.state.activity.COotherContent[0],callback:function(e){t.$set(t.$store.state.activity.COotherContent,0,e)},expression:"$store.state.activity.COotherContent[0]"}}):t._e()],1),t._v(" "),a("p",[a("el-radio",{attrs:{label:"1"},model:{value:t.$store.state.activity.COotherType,callback:function(e){t.$set(t.$store.state.activity,"COotherType",e)},expression:"$store.state.activity.COotherType"}},[t._v("送赠品")]),t._v(" "),1==t.$store.state.activity.COotherType?a("el-input",{staticClass:"m-input-m",attrs:{placeholder:"赠品内容"},model:{value:t.$store.state.activity.COotherContent[1],callback:function(e){t.$set(t.$store.state.activity.COotherContent,1,e)},expression:"$store.state.activity.COotherContent[1]"}}):t._e()],1),t._v(" "),a("p",[a("el-radio",{attrs:{label:"2"},model:{value:t.$store.state.activity.COotherType,callback:function(e){t.$set(t.$store.state.activity,"COotherType",e)},expression:"$store.state.activity.COotherType"}},[t._v("送优惠券")]),t._v(" "),2==t.$store.state.activity.COotherType?a("el-select",{staticClass:"m-input-l",attrs:{filterable:"",remote:"","remote-method":t.productBlur,placeholder:"选择已有优惠券"},model:{value:t.$store.state.activity.COotherContent[2],callback:function(e){t.$set(t.$store.state.activity.COotherContent,2,e)},expression:"$store.state.activity.COotherContent[2]"}},t._l(t.discount_data,function(t,e){return a("el-option",{key:e,attrs:{label:t.COname,value:t.COid}})})):t._e(),t._v(" "),2==t.$store.state.activity.COotherType?a("span",{staticClass:"m-link m-first",on:{click:t.addNewDiscount}},[t._v("新增优惠券")]):t._e()],1)]):t._e()])],1)]})],2),t._v(" "),a("div",{staticClass:"m-bottom-btn m-flex-center"},[a("span",{staticClass:"m-btn",on:{click:t.lastStep}},[t._v("上一步")]),t._v(" "),a("span",{staticClass:"m-btn  active",on:{click:t.onSubmit}},[t._v("下一步")])])])])],1)},staticRenderFns:[]};var v=a("VU/8")(l,c,!1,function(t){a("sP12")},"data-v-a822eb10",null);e.default=v.exports},sP12:function(t,e){}});
//# sourceMappingURL=11.ed26fe8212fcf3c7f301.js.map