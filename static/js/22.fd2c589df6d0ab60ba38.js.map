{"version":3,"sources":["webpack:///src/views/activity/discountStoreStepOne.vue","webpack:///./src/views/activity/discountStoreStepOne.vue?dba3","webpack:///./src/views/activity/discountStoreStepOne.vue"],"names":["discountStoreStepOne","data","title_list","name","url","step","active","next","storeForm","rules","COname","required","message","trigger","COamount","COstart","COend","COfilter","COnumber","COuserfilter","show_modal","product_data","page_data","total_page","current_page","total_num","page_size","check_data","components","pageTitle","title","Pagination","page","mounted","this","getData","$route","query","COid","getDetailData","methods","v","_this","axios_default","a","get","api","get_acabo","params","token","localStorage","getItem","then","res","status","$store","state","discount","COabo","COstatus","COother","COdiscount","COtype","COunit","PRids","COgenre","disable","code","_this2","that","page_num","product_filter","get_all_product","products","_loop","i","indexOf","PRid","$nextTick","$refs","table","toggleRowSelection","length","count","Math","ceil","$message","error","onSubmit","showModal","storeSubmit","changeFun","e","_arr","push","concat","newarr","arr","JSON","parse","stringify_default","_i","createOne","_this3","type","validate","valid","_form","Number","post","create","router","$router","path","pageChange","created","activity_discountStoreStepOne","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","list","_v","ref","model","label-width","disabled","label","prop","placeholder","value","callback","$$v","$set","expression","on","click","$event","_s","staticStyle","width","value-format","directives","rawName","inline","margin-top","stripe","selection-change","align","scopedSlots","_u","key","fn","scope","height","src","row","PRimage","PRname","total","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/22.fd2c589df6d0ab60ba38.js","sourcesContent":["<template>\n  <div class=\"m-step\">\n    <page-title :list=\"title_list\" ></page-title>\n    <el-form  :model=\"$store.state.discount\" ref=\"storeForm\" :rules=\"rules\" label-width=\"1.2rem\" class=\"demo-ruleForm\" :disabled=\"$store.state.discount.disable\" >\n      <div class=\"m-step-content\">\n        <div class=\"m-step-part\">\n          <step :list=\"step\"></step>\n        </div>\n        <div class=\"m-step-part\">\n          <h3 class=\"m-step-h3\">基本信息</h3>\n          <el-form-item label=\"活动名称：\" prop=\"COname\">\n            <el-input v-model=\"$store.state.discount.COname\" class=\"m-input-l\" placeholder=\"\"></el-input>\n            <span class=\"m-label-line\">商品范围：</span>\n            <span class=\"m-link m-first\" @click=\"showModal(true)\">选择商品</span>\n            <span class=\"m-remark\">(已选中{{$store.state.discount.PRids.length}}商品,不如则默认全店商品可用)</span>\n          </el-form-item>\n          <el-form-item label=\"使用时间：\" prop=\"COstart\">\n            <el-date-picker type=\"date\"  placeholder=\"起始时间\"  value-format=\"yyyy-MM-dd HH:mm:ss\" v-model=\"$store.state.discount.COstart\" style=\"width: 2rem;\"></el-date-picker>\n            <span class=\"m-date-line\">-</span>\n            <el-date-picker type=\"date\"  placeholder=\"结束时间\"  value-format=\"yyyy-MM-dd HH:mm:ss\" v-model=\"$store.state.discount.COend\" style=\"width: 2rem;\"></el-date-picker>\n          </el-form-item>\n        </div>\n        <div class=\"m-step-part\">\n          <h3 class=\"m-step-h3 m-flex-between\">\n            <span>面额信息</span>\n          </h3>\n          <el-form-item label=\"优惠金额：\" prop=\"COamount\">\n            <el-input v-model=\"$store.state.discount.COamount\" type=\"number\" class=\"m-input-l\" placeholder=\"\"></el-input>\n            <span>&nbsp; 元</span>\n          </el-form-item>\n          <el-form-item label=\"使用门槛：\" prop=\"COfilter\">\n            <span>满 &nbsp;</span>\n            <el-input v-model=\"$store.state.discount.COfilter\" type=\"number\" class=\"m-input-special\" placeholder=\"\"></el-input>\n            <span>&nbsp; 元</span>\n          </el-form-item>\n          <el-form-item label=\"发行量：\" prop=\"COnumber\">\n            <el-input v-model=\"$store.state.discount.COnumber\" type=\"number\" class=\"m-input-l \" placeholder=\"\"></el-input>\n            <span>&nbsp; 张</span>\n          </el-form-item>\n          <el-form-item label=\"每人限额：\" prop=\"COuserfilter\">\n            <el-input v-model=\"$store.state.discount.COuserfilter\" type=\"number\" class=\"m-input-l\" placeholder=\"\"></el-input>\n            <span>&nbsp; 张</span>\n          </el-form-item>\n        </div>\n        <div class=\"m-bottom-btn m-flex-center\">\n          <!--<router-link to=\"/activity/storeStepResult\" >-->\n            <span class=\"m-btn active\" @click=\"createOne\" >创建</span>\n          <!--</router-link>-->\n        </div>\n      </div>\n    </el-form>\n    <transition name=\"fade\">\n      <div class=\"m-modal\" v-show=\"show_modal\">\n        <div class=\"m-modal-state\">\n          <el-form :inline=\"true\" :model=\"storeForm\" class=\"demo-form-inline\" :disabled=\"$store.state.discount.disable\" >\n            <div class=\"m-modal-head m-flex-between\">\n              <span>选择商品</span>\n              <span class=\"m-close\" @click=\"showModal(false)\">X</span></div>\n            <div class=\"m-modal-content\">\n\n                <div class=\"m-select-box\">\n                  <div class=\"m-left\">\n                    <!--<el-form-item label=\"全部类目\">-->\n                      <!--<el-select v-model=\"storeForm.name\" class=\"m-input-s\" placeholder=\"活动区域\">-->\n                        <!--<el-option label=\"区域一\" value=\"shanghai\"></el-option>-->\n                        <!--<el-option label=\"区域二\" value=\"beijing\"></el-option>-->\n                      <!--</el-select>-->\n                    <!--</el-form-item>-->\n                    <el-form-item label=\"商品名称\">\n                      <el-input v-model=\"storeForm.name\" class=\"m-input-s\" placeholder=\"\"></el-input>\n                    </el-form-item>\n                  </div>\n                  <div class=\"m-right\">\n                    <el-form-item>\n                      <el-button type=\"primary\" class=\"m-select-btn\" @click=\"storeSubmit\">查询</el-button>\n                    </el-form-item>\n                  </div>\n                </div>\n\n              <div class=\"m-middle\" style=\"width: 100%;margin-top: 0.1rem;\" >\n                <el-table :data=\"product_data\" stripe style=\"width: 100%\" ref=\"table\" @selection-change=\"changeFun\" >\n                  <el-table-column type=\"selection\" width=\"55\" prop=\"COcheck\" ></el-table-column>\n                  <el-table-column align=\"center\" prop=\"userId\" width=\"400\" label=\"宝贝描述\">\n                    <template slot-scope=\"scope\">\n                      <div class=\"m-production-description\">\n                        <img class=\"m-img\" :src=\"scope.row.PRimage[0]\" style=\"width: 0.5rem;height: 0.5rem;\"/>\n                        <div>\n                          <p>{{scope.row.PRname}}</p>\n                          <p>{{scope.row.PRid}}</p>\n                        </div>\n                      </div>\n                    </template>\n                  </el-table-column>\n                  <el-table-column align=\"center\" prop=\"userId\" label=\"价格\" ></el-table-column>\n\n                  <el-table-column align=\"center\" prop=\"PRstock\" label=\"库存\" ></el-table-column>\n                  <!--<el-table-column align=\"center\" label=\"操作\" >-->\n                  <!--<template slot-scope=\"scope\">-->\n                  <!--<span class=\"m-link m-first\">参加活动</span>-->\n                  <!--</template>-->\n                  <!--</el-table-column>-->\n                </el-table>\n              </div>\n              <div class=\"m-page-box\">\n                <Pagination :total=\"page_data.total_page\" @pageChange=\"pageChange\"></Pagination>\n              </div>\n            </div>\n            <div class=\"m-modal-foot\">\n              <span class=\"m-btn active\" @click=\"onSubmit\">确认</span>\n              <span class=\"m-btn\">取消</span>\n            </div>\n          </el-form>\n        </div>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script type=\"text/ecmascript-6\">\n  import pageTitle from '../../components/common/title';\n  import step from '../../components/common/step';\n  import Pagination from \"../../components/common/page\";\n  import axios from 'axios';\n  import api from '../../api/api';\n  export default {\n    data() {\n      return {\n        title_list:[\n          {\n            name:'优惠券',\n            url:'/activity/discountCoupon'\n          },\n          {\n            name:'添加商品优惠券',\n            url:'/activity/discountProductStepOne'\n          }\n        ],\n        step:[\n          {\n            name:'添加优惠券',\n            active:true,\n            next:false\n          },\n          {\n            name:'完成',\n            active:false,\n            next:false\n          }\n        ],\n        storeForm:{\n          name:''\n        },\n        rules:{\n          COname:[\n            { required: true, message: '请输入活动名称', trigger: 'blur' }\n          ],\n          COamount:[\n            { required: true, message: '请输入优惠金额', trigger: 'blur' }\n          ],\n          COstart:[\n            { required: true, message: '请选择开始时间', trigger: 'blur' }\n          ],\n          COend:[\n            { required: true, message: '请选择结束时间', trigger: 'blur' }\n          ],\n          COfilter:[\n            { required: true, message: '请输入使用门槛', trigger: 'blur' }\n          ],\n          COnumber:[\n            { required: true, message: '请输入发行量', trigger: 'blur' }\n          ],\n          COuserfilter:[\n            { required: true, message: '请输入每人限额', trigger: 'blur' }\n          ],\n\n        },\n        show_modal:false,\n        product_data:[],\n        page_data:{\n          total_page:0,\n          current_page:1,\n          total_num:0,\n          page_size:1\n        },\n        check_data:[]\n      }\n    },\n    components:{\n      pageTitle,\n      step,\n      Pagination\n    },\n    mounted(){\n      this.getData();\n      if(this.$route.query.COid){\n        this.getDetailData(this.$route.query.COid);\n      }\n    },\n    methods: {\n      /*获取活动详情*/\n      getDetailData(v){\n        axios.get(api.get_acabo,{\n          params:{\n            token:localStorage.getItem('token'),\n            COid:v\n          }\n        }).then(res => {\n          if(res.data.status == 200){\n            this.$store.state.discount={\n              COabo:res.data.data.COabo,\n              COname:res.data.data.COname,\n              COstatus:res.data.data.COstatus,\n              COstart:res.data.data.COstart,\n              COend:res.data.data.COend,\n              COfilter:res.data.data.COfilter,\n              COother:res.data.data.COother,\n              COdiscount:res.data.data.COdiscount,\n              COamount:res.data.data.COamount,\n              COtype:res.data.data.COtype,\n              COunit:res.data.data.COunit,\n              COnumber:res.data.data.COnumber,\n              PRids:res.data.data.PRids,\n              COuserfilter:res.data.data.COuserfilter,\n              COgenre:'优惠券',\n              disable:true\n            }\n          }\n        })\n      },\n      /*获取表格数据*/\n      getData(v,code){\n        let that = this;\n        let params = {\n          token:localStorage.getItem('token'),\n          page_num: v || this.page_data.current_page,\n          page_size:this.page_data.page_size,\n          product_filter:code\n        };\n        axios.get(api.get_all_product,{params:params}).then(res => {\n          if(res.data.status == 200) {\n            this.product_data = res.data.data.products;\n            for(let i=0;i<this.product_data.length;i++){\n              if(this.$store.state.discount.PRids.indexOf(this.product_data[i].PRid)!= -1){\n                that.$nextTick(function(){//注意这个，延时执行。\n                  that.$refs.table.toggleRowSelection(that.product_data[i],true);//每次更新了数据，触发这个函数即可。\n                });\n              }\n            }\n            this.page_data.total_num = res.data.data.count;\n            this.page_data.total_page = Math.ceil(this.page_data.total_num / this.page_data.page_size);\n          }else{\n            this.$message.error(res.data.message);\n          }\n        },error => {\n          this.$message.error(error.data.message);\n        })\n      },\n      /*点击确认*/\n      onSubmit(){\n\n        this.show_modal = false;\n      },\n      /*显示模态框*/\n      showModal(v){\n        this.show_modal = v;\n      },\n      /*商品查询*/\n      storeSubmit(){\n        this.getData(1,this.storeForm.name);\n      },\n      /*选择商品*/\n      changeFun(e){\n        let _arr = [];\n        for(let i=0;i<e.length;i++){\n          _arr.push(e[i].PRid);\n        }\n        this.check_data[this.page_data.current_page-1] = [].concat(_arr);\n        let newarr=[];\n        let arr = JSON.parse(JSON.stringify(this.check_data));\n        for(let i=0;i<arr.length;i++)\n        {\n          newarr=newarr.concat(arr[i]);\n        }\n        this.$store.state.discount.PRids = [].concat(newarr);\n      },\n      /*创建一个优惠券*/\n      createOne(){\n        if(this.$route.query.COid){\n          this.$message({\n            type: 'warning',\n            message: '已创建过的优惠券不可修改'\n          });\n          return false;\n        }\n        let that = this;\n        this.$refs['storeForm'].validate((valid) => {\n          if (valid) {\n            // console.log(this.$store.state.activity)\n            let _form = JSON.parse(JSON.stringify(this.$store.state.discount));\n            // for(let i =0;i<this.$store.state.activity.COimage.length;i++){\n            //   _form.COimage = this.$store.state.activity.COimage[0].url\n            // }\n            _form.COamount = Number(_form.COamount);\n            _form.COnumber = Number(_form.COnumber);\n            _form.COfilter  = Number(_form.COfilter );\n            _form.COdiscount = Number(_form.COdiscount);\n            _form.COuserfilter = Number(_form.COuserfilter);\n            axios.post(api.create+'?token='+localStorage.getItem('token'),_form).then(res => {\n              if(res.data.status == 200){\n                this.$message({\n                  type: 'success',\n                  message: '处理成功 '\n                });\n                this.$store.state.discount = {\n                  COabo:'',\n                  COname:'',\n                  COstatus:'',\n                  COstart:'',\n                  COend:'',\n                  COfilter:null,\n                  COother:'',\n                  COdiscount:null,\n                  COamount:null,\n                  COtype:'',\n                  COnumber:null,\n                  PRids:[],\n                  COuserfilter:null,\n                  COgenre:'优惠券'\n                }\n                if(this.$route.query.router == 'activity'){\n                  this.$router.push('/activity/activityStoreStepTwo?COid='+res.data.data);\n                }else{\n                  this.$router.push({path:'/activity/storeStepResult',query:{\n                      COamount:_form.COamount,\n                      COfilter:_form.COfilter,\n                      COstart:_form.COstart,\n                      COend:_form.COend\n                    }});\n                }\n              }else{\n                this.$message({\n                  type: 'error',\n                  message: '服务器请求失败，请稍后再试 '\n                });\n              }\n            },error =>{\n              this.$message({\n                type: 'error',\n                message: '服务器请求失败，请稍后再试 '\n              });\n            })\n\n          }\n        })\n      },\n      /*分页点击*/\n      pageChange(v){\n        if(v == this.page_data.current_page){\n          this.$message({\n            message: '这已经是第' + v + '页数据了',\n            type: 'warning'\n          });\n          return false;\n        }\n        this.page_data.current_page = v;\n        this.getData(v)\n      }\n    },\n    created() {\n\n    }\n  }\n</script>\n<style lang=\"less\" rel=\"stylesheet/less\" scoped>\n  @import \"../../common/css/activity\";\n  @import \"../../common/css/modal\";\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/activity/discountStoreStepOne.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-step\"},[_c('page-title',{attrs:{\"list\":_vm.title_list}}),_vm._v(\" \"),_c('el-form',{ref:\"storeForm\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.$store.state.discount,\"rules\":_vm.rules,\"label-width\":\"1.2rem\",\"disabled\":_vm.$store.state.discount.disable}},[_c('div',{staticClass:\"m-step-content\"},[_c('div',{staticClass:\"m-step-part\"},[_c('step',{attrs:{\"list\":_vm.step}})],1),_vm._v(\" \"),_c('div',{staticClass:\"m-step-part\"},[_c('h3',{staticClass:\"m-step-h3\"},[_vm._v(\"基本信息\")]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"活动名称：\",\"prop\":\"COname\"}},[_c('el-input',{staticClass:\"m-input-l\",attrs:{\"placeholder\":\"\"},model:{value:(_vm.$store.state.discount.COname),callback:function ($$v) {_vm.$set(_vm.$store.state.discount, \"COname\", $$v)},expression:\"$store.state.discount.COname\"}}),_vm._v(\" \"),_c('span',{staticClass:\"m-label-line\"},[_vm._v(\"商品范围：\")]),_vm._v(\" \"),_c('span',{staticClass:\"m-link m-first\",on:{\"click\":function($event){_vm.showModal(true)}}},[_vm._v(\"选择商品\")]),_vm._v(\" \"),_c('span',{staticClass:\"m-remark\"},[_vm._v(\"(已选中\"+_vm._s(_vm.$store.state.discount.PRids.length)+\"商品,不如则默认全店商品可用)\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"使用时间：\",\"prop\":\"COstart\"}},[_c('el-date-picker',{staticStyle:{\"width\":\"2rem\"},attrs:{\"type\":\"date\",\"placeholder\":\"起始时间\",\"value-format\":\"yyyy-MM-dd HH:mm:ss\"},model:{value:(_vm.$store.state.discount.COstart),callback:function ($$v) {_vm.$set(_vm.$store.state.discount, \"COstart\", $$v)},expression:\"$store.state.discount.COstart\"}}),_vm._v(\" \"),_c('span',{staticClass:\"m-date-line\"},[_vm._v(\"-\")]),_vm._v(\" \"),_c('el-date-picker',{staticStyle:{\"width\":\"2rem\"},attrs:{\"type\":\"date\",\"placeholder\":\"结束时间\",\"value-format\":\"yyyy-MM-dd HH:mm:ss\"},model:{value:(_vm.$store.state.discount.COend),callback:function ($$v) {_vm.$set(_vm.$store.state.discount, \"COend\", $$v)},expression:\"$store.state.discount.COend\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"m-step-part\"},[_c('h3',{staticClass:\"m-step-h3 m-flex-between\"},[_c('span',[_vm._v(\"面额信息\")])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"优惠金额：\",\"prop\":\"COamount\"}},[_c('el-input',{staticClass:\"m-input-l\",attrs:{\"type\":\"number\",\"placeholder\":\"\"},model:{value:(_vm.$store.state.discount.COamount),callback:function ($$v) {_vm.$set(_vm.$store.state.discount, \"COamount\", $$v)},expression:\"$store.state.discount.COamount\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"  元\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"使用门槛：\",\"prop\":\"COfilter\"}},[_c('span',[_vm._v(\"满  \")]),_vm._v(\" \"),_c('el-input',{staticClass:\"m-input-special\",attrs:{\"type\":\"number\",\"placeholder\":\"\"},model:{value:(_vm.$store.state.discount.COfilter),callback:function ($$v) {_vm.$set(_vm.$store.state.discount, \"COfilter\", $$v)},expression:\"$store.state.discount.COfilter\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"  元\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"发行量：\",\"prop\":\"COnumber\"}},[_c('el-input',{staticClass:\"m-input-l \",attrs:{\"type\":\"number\",\"placeholder\":\"\"},model:{value:(_vm.$store.state.discount.COnumber),callback:function ($$v) {_vm.$set(_vm.$store.state.discount, \"COnumber\", $$v)},expression:\"$store.state.discount.COnumber\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"  张\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"每人限额：\",\"prop\":\"COuserfilter\"}},[_c('el-input',{staticClass:\"m-input-l\",attrs:{\"type\":\"number\",\"placeholder\":\"\"},model:{value:(_vm.$store.state.discount.COuserfilter),callback:function ($$v) {_vm.$set(_vm.$store.state.discount, \"COuserfilter\", $$v)},expression:\"$store.state.discount.COuserfilter\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"  张\")])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"m-bottom-btn m-flex-center\"},[_c('span',{staticClass:\"m-btn active\",on:{\"click\":_vm.createOne}},[_vm._v(\"创建\")])])])]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.show_modal),expression:\"show_modal\"}],staticClass:\"m-modal\"},[_c('div',{staticClass:\"m-modal-state\"},[_c('el-form',{staticClass:\"demo-form-inline\",attrs:{\"inline\":true,\"model\":_vm.storeForm,\"disabled\":_vm.$store.state.discount.disable}},[_c('div',{staticClass:\"m-modal-head m-flex-between\"},[_c('span',[_vm._v(\"选择商品\")]),_vm._v(\" \"),_c('span',{staticClass:\"m-close\",on:{\"click\":function($event){_vm.showModal(false)}}},[_vm._v(\"X\")])]),_vm._v(\" \"),_c('div',{staticClass:\"m-modal-content\"},[_c('div',{staticClass:\"m-select-box\"},[_c('div',{staticClass:\"m-left\"},[_c('el-form-item',{attrs:{\"label\":\"商品名称\"}},[_c('el-input',{staticClass:\"m-input-s\",attrs:{\"placeholder\":\"\"},model:{value:(_vm.storeForm.name),callback:function ($$v) {_vm.$set(_vm.storeForm, \"name\", $$v)},expression:\"storeForm.name\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"m-right\"},[_c('el-form-item',[_c('el-button',{staticClass:\"m-select-btn\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.storeSubmit}},[_vm._v(\"查询\")])],1)],1)]),_vm._v(\" \"),_c('div',{staticClass:\"m-middle\",staticStyle:{\"width\":\"100%\",\"margin-top\":\"0.1rem\"}},[_c('el-table',{ref:\"table\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.product_data,\"stripe\":\"\"},on:{\"selection-change\":_vm.changeFun}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\",\"prop\":\"COcheck\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"userId\",\"width\":\"400\",\"label\":\"宝贝描述\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"m-production-description\"},[_c('img',{staticClass:\"m-img\",staticStyle:{\"width\":\"0.5rem\",\"height\":\"0.5rem\"},attrs:{\"src\":scope.row.PRimage[0]}}),_vm._v(\" \"),_c('div',[_c('p',[_vm._v(_vm._s(scope.row.PRname))]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(scope.row.PRid))])])])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"userId\",\"label\":\"价格\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"PRstock\",\"label\":\"库存\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"m-page-box\"},[_c('Pagination',{attrs:{\"total\":_vm.page_data.total_page},on:{\"pageChange\":_vm.pageChange}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"m-modal-foot\"},[_c('span',{staticClass:\"m-btn active\",on:{\"click\":_vm.onSubmit}},[_vm._v(\"确认\")]),_vm._v(\" \"),_c('span',{staticClass:\"m-btn\"},[_vm._v(\"取消\")])])])],1)])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-25727ebe\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/activity/discountStoreStepOne.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-25727ebe\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./discountStoreStepOne.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./discountStoreStepOne.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./discountStoreStepOne.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-25727ebe\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./discountStoreStepOne.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-25727ebe\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/activity/discountStoreStepOne.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}