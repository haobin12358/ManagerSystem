webpackJsonp([14],{"8FjG":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("XiPb"),i=s("P9l9"),c=(s("zL8q"),s("mtWM")),o=s.n(c),r={data:function(){return{name:"商品发布",form:{CTid:""},checked:!0,scroll_index:0,product_list:[],category_list:[],select_category:[],select_category1:[{CTfromid:"0",CTid:"1",CTname:"百货食品"},{CTfromid:"1",CTid:"4",CTname:"生鲜"},{CTfromid:"2",CTid:"10",CTname:"小龙虾"}],category_input:[]}},components:{pageTitle:a.a},mounted:function(){this.$route.query.CTid?this.getProductSelect(this.$route.query.CTid):this.getChildCategory("",0),this.getProductList("")},methods:{freshClick:function(){console.log("fresh")},search:function(){if(!this.form.CTid)return!1;this.getProductSelect(this.form.CTid)},productBlur:function(t){this.getProductList(t)},changeInput:function(t){console.log(t),0==t?this.getChildCategory("",0,this.category_input[t]):this.getChildCategory(this.select_category[t-1].CTid,t,this.category_input[t])},getProductList:function(t){var e=this,s=this;s.product_list=[];var a=s.product_list;o.a.get(i.a.get_category_by_prname,{params:{token:localStorage.getItem("token"),PRname:t}}).then(function(t){200==t.data.status?(a=t.data.data,s.product_list=[].concat(a)):e.$message.error(t.data.message)},function(t){e.$message.error(t.data.message)})},getProductSelect:function(t){var e=this,s=this;s.select_category=[];var a=s.select_category;o.a.get(i.a.get_ctlist_by_ctid,{params:{token:localStorage.getItem("token"),CTid:t}}).then(function(t){200==t.data.status?(a=t.data.data,s.select_category=[].concat(a),s.getCategory()):e.$message.error(t.data.message)},function(t){e.$message.error(t.data.message)})},getChildCategory:function(t,e,s){var a=this,c=this,r=c.category_list;o.a.get(i.a.get_child_category,{params:{token:localStorage.getItem("token"),CTid:t,category_filter:s}}).then(function(t){200==t.data.status?t.data.data.length<1&&!s?c.$message({message:"已经达到最后一层",type:"warning"}):(r[e]=t.data.data,c.category_list=[].concat(r)):a.$message.error(t.data.message)},function(t){a.$message.error(t.data.message)})},selectCategory:function(t,e){var s=this.select_category;s[e]=t;for(var a=0;a<s.length;a++)a>e&&(s=s.slice(0,a));this.select_category=[].concat(s),this.getChildCategory(t.CTid,e+1)},getCategory:function(){for(var t=0;t<this.select_category.length;t++)0==t?this.getChildCategory("",0):this.getChildCategory(this.select_category[t-1].CTid,t)},sideClick:function(t){this.linkTo=t},scroll:function(t){var e=document.getElementById("m-scroll");return(-1!=t||0!=this.scroll_index)&&((1!=t||!(this.scroll_index==this.category_list.length||this.category_list.length<=3))&&(this.scroll_index=this.scroll_index+Number(t),void(e.style.marginLeft=-2.08*this.scroll_index+"rem")))},nextClick:function(){return this.checked?this.select_category.length<this.category_list.length?(this.$message.error("请先选择具体类目"),!1):void this.$router.push({path:"/commodity/goodsImported",query:{CTid:this.select_category[this.select_category.length-1].CTid}}):(this.$message.error("请先阅读以上规则"),!1)}},created:function(){}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-form",{ref:"form",attrs:{model:t.form,"label-width":"1.2rem"}},[s("page-title",{attrs:{title:t.name},on:{freshClick:t.freshClick}}),t._v(" "),s("div",{staticClass:"m-goodsImported-content"},[s("div",{staticClass:"m-edit-btn"},[s("span",[t._v("-编辑-")])]),t._v(" "),s("div",{staticClass:"m-one-part"},[s("h3",[t._v("类目选择")]),t._v(" "),s("el-form-item",{attrs:{label:"类目搜索:"}},[s("el-select",{staticClass:"m-input-s",attrs:{filterable:"",remote:"","remote-method":t.productBlur},model:{value:t.form.CTid,callback:function(e){t.$set(t.form,"CTid",e)},expression:"form.CTid"}},t._l(t.product_list,function(t,e){return s("el-option",{key:e,attrs:{label:t.CTname,value:t.CTid}})})),t._v(" "),s("span",{staticClass:"m-btn",on:{click:t.search}},[t._v("搜索")])],1),t._v(" "),s("el-form-item",{attrs:{label:"商品类目:",rules:[{required:!0}]}},[s("div",{staticClass:"m-select-box"},[s("p",{staticClass:"m-alert"},[t._v("错误填写商品属性，可能会引起商品下架或搜索流量减少，影响您的正常销售，请认真准确填写！")]),t._v(" "),s("div",{staticClass:"m-selects"},[s("div",{staticClass:"m-left-right"},[s("span",{staticClass:"m-btn-img m-left-btn-img",class:t.scroll_index>0?"active":"",on:{click:function(e){t.scroll(-1)}}})]),t._v(" "),s("div",{staticClass:"m-category-content"},[s("div",{attrs:{id:"m-scroll"}},t._l(t.category_list,function(e,a){return s("div",{key:Math.random(),staticClass:"m-one-category"},[s("div",{staticClass:"m-search-box"},[s("span",{staticClass:"icon icon-search"}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.category_input[a],expression:"category_input[index]"}],attrs:{type:"text",placeholder:""},domProps:{value:t.category_input[a]},on:{change:function(e){t.changeInput(a)},input:function(e){e.target.composing||t.$set(t.category_input,a,e.target.value)}}})]),t._v(" "),s("div",{staticClass:"m-classify"},[s("ul",[t._l(e,function(e,i){return[s("li",{key:Math.random(),class:t.select_category[a]&&t.select_category[a].CTid==e.CTid?"active":"",on:{click:function(s){t.selectCategory(e,a)}}},[s("span",[t._v(t._s(e.CTname))]),t._v(" "),s("i",{staticClass:"el-icon-arrow-right"})])]})],2)])])}))]),t._v(" "),s("div",{staticClass:"m-left-right"},[s("span",{staticClass:"m-btn-img m-right-btn-img",class:t.category_list.length>3?"active":"",on:{click:function(e){t.scroll(1)}}})])]),t._v(" "),s("div",{staticClass:"m-now-select"},[s("p",[t._v("当前选择类目：\n               "),t._l(t.select_category,function(e,a){return[s("span",[t._v(t._s(e.CTname)+" "),a+1<t.select_category.length?s("i",[t._v(" > ")]):t._e()])]})],2)]),t._v(" "),s("div",{staticClass:"m-rule-box"},[s("h3",[t._v("规则")]),t._v(" "),s("div",{staticClass:"m-rule"},[s("p",[s("span",[t._v("发布须知")]),t._v("：平台禁止发布侵犯他人知识产权的商品，请确认商品符合知识产权保护的规定！")])])]),t._v(" "),s("div",{staticClass:"m-check"},[s("el-checkbox",{model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("我已阅读以上规则")])],1)])])],1),t._v(" "),s("div",{staticClass:"m-goodsImported-foot"},[s("span",{staticClass:"m-foot-btn",on:{click:t.nextClick}},[t._v("下一步")])])])],1)],1)},staticRenderFns:[]};var l=s("VU/8")(r,n,!1,function(t){s("sUK+")},"data-v-8d426bdc",null);e.default=l.exports},"sUK+":function(t,e){}});
//# sourceMappingURL=14.6d0f3bffeb89c7d7816b.js.map