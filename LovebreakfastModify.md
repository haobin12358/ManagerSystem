# service + common 转单例模式的修改  
---
单例模式经过测试，无法提高高并发的性能问题，但是可以有效提升每次的访问效率。
思路：
* 目前control层用到service层的时候，都需要实例化一次service对象，而这一步骤仔细思考是毫无必要的，因为他并不随逻辑的变化而改变自身任何属性，那其实它可以以一个常量的形式存在于整个系统，当我需要的时候直接拿就好了。实例化的这一段时间我觉得完全可以取消掉。
* 单例模式的实现由5种，装饰器、改new方法、模块化、用type、还有一种不是很好用的。参考链接： 
[python单例模式](https://www.cnblogs.com/huchong/p/8244279.html#_lab2_1_0)  
* 一开始采用的是模块化，也是用这个模式去测试的，不过感觉这个模式会导致我要改的地方太多，而且代码风格上也不是很好看，一个类下被实例化了。于是采用了基于new方法的修改，但是随后就发现我是有父类的，当父类被实例化之后，子类就不会再被实例化，清除了父类的new方法的整改之后我还想让父类是单例模式，我就想到了模块化这一个类。但是实例化的地方是在common里，这样看上去不是那么奇怪吧（ps: java转的python，对它很随意的写法表示强迫症晚期癌根本压抑不住）
* 目前整改到common里，common里目前也可以看到是很随意的写的，属于想起啥写啥的写法。整改之前零零碎碎的装饰器到一个文件里；整改对sqlalchemy检索结果的处理到一个文件里；整改返回import的东西到一个文件里，这个动态import后面还能扩展的更好一点，目前只是简单的eval；其他工具类方法像处理时间、处理字符串的都整改到一个Tools的文件里。
